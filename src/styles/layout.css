/* Layout-related styles */

/* Container and Grid */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: 0.25rem; /* Reduced padding to use more space */
  padding-left: 0.25rem;
}

/* Align with the grid structure in CIAClassificationApp.tsx */
.grid.grid-cols-1.sm\:grid-cols-2.lg\:grid-cols-3.gap-4.p-4[data-testid="dashboard-grid"] {
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 1rem;
  width: 100%;
  padding: 1rem;
  overflow: visible; /* Ensure grid doesn't clip content */
}

/* Apply responsive grid based on CIAClassificationApp.tsx */
@media (min-width: 640px) {
  .grid.grid-cols-1.sm\:grid-cols-2.lg\:grid-cols-3.gap-4.p-4[data-testid="dashboard-grid"] {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (min-width: 1024px) {
  .grid.grid-cols-1.sm\:grid-cols-2.lg\:grid-cols-3.gap-4.p-4[data-testid="dashboard-grid"] {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

/* Improved dashboard grid with better spacing */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 0.75rem; /* Reduced gap */
  width: 100%;
  padding: 0.25rem; /* Reduced padding */
  overflow: visible; /* Ensure grid doesn't clip content */
}

/* Widget column sizing */
.widget-col-4 {
  grid-column: span 4;
}

.widget-col-6 {
  grid-column: span 6;
}

.widget-col-12 {
  grid-column: span 12;
}

/* Fix widget size consistency */
[data-testid^="widget-"] {
  width: 100%; /* Keep width at 100% */
  min-height: auto; /* Let content determine height */ /* Forces minimum height regardless of content */
  overflow: visible; /* Ensure visibility */
  position: relative;
  display: flex;
  flex-direction: column;
  margin-bottom: 0.75rem;
  height: auto; /* Allow natural height */
}

/* Make all widget sizes consistent at 1/3 width */
.widget-col-2,
.widget-col-4,
.widget-col-6 {
  grid-column: span 1; /* Force all widgets to take exactly 1/3 of space */
}

/* Full width widgets should still be full width */
.widget-col-12 {
  grid-column: span 3;
}

/* Override Tailwind responsive classes */
.grid-cols-1,
.sm\:grid-cols-2,
.lg\:grid-cols-3 {
  grid-template-columns: repeat(3, 1fr) !important;
}

/* Content height distribution */
.full-height-container {
  height: auto; /* Let content determine height */
  min-height: 600px; /* Minimum height */
  overflow: visible; /* Allow content to be visible */
}

/* Optimize widget height */
.widget {
  min-height: 300px; /* Minimum height without !important */
  width: 100%;
  height: auto; /* Allow natural height */
  max-height: none; /* Remove maximum height restriction */
}

/* Each widget takes 1/3 of the grid space */
[data-testid^="widget-"] {
  width: 100% !important;
}

/* Smaller widgets for specific components */
.compact-widget {
  min-height: 250px !important;
}

/* Larger widgets for data-heavy components */
.expanded-widget {
  min-height: 400px !important;
}

/* Reduced app title padding */
.app-title {
  padding: 0.75rem 1.25rem; /* Reduced padding */
  margin-bottom: 0.75rem; /* Reduced margin */
}

/* Responsive adjustments */
@media (max-width: 1400px) {
  .dashboard-grid {
    gap: 1rem !important;
  }

  .widget {
    min-height: 320px !important;
  }

  .widget-col-3 {
    grid-column: span 4;
  }
}

@media (max-width: 1200px) {
  .widget-col-2,
  .widget-col-4,
  .widget-col-6 {
    grid-column: span 1; /* Still 3 per row on medium-large screens */
  }

  .dashboard-grid {
    grid-template-columns: repeat(8, 1fr);
  }

  .widget-col-3 {
    grid-column: span 4;
  }

  .widget-col-4 {
    grid-column: span 4;
  }

  .widget-col-6 {
    grid-column: span 6;
  }
}

@media (max-width: 992px) {
  .dashboard-grid {
    grid-template-columns: repeat(
      2,
      1fr
    ) !important; /* 2 columns on medium screens */
  }

  .widget-col-2,
  .widget-col-4,
  .widget-col-6 {
    grid-column: span 1; /* 2 per row on medium screens */
  }

  .widget-col-12 {
    grid-column: span 2 !important; /* Full width on medium screens */
  }
}

@media (max-width: 768px) {
  .dashboard-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 0.75rem;
  }

  .widget-col-2,
  .widget-col-4,
  .widget-col-6,
  .widget-col-12 {
    grid-column: span 1 !important; /* 1 per row on small screens */
  }

  .widget-col-3,
  .widget-col-4,
  .widget-col-6 {
    grid-column: span 4;
  }
}

@media (max-width: 640px) {
  .dashboard-grid {
    grid-template-columns: 1fr; /* Single column on very small screens */
    gap: 0.75rem;
  }

  .widget {
    min-height: 200px;
  }
}

@media (max-width: 480px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
  }
}

/* Test Environment Fixes - Make these adjustments standard */
/* Force visibility of widgets */
[data-testid^="widget-"] {
  overflow: visible !important;
  position: relative !important;
  height: auto !important; /* Allow natural height */
  min-height: 200px !important; /* Reduced minimum height */
  opacity: 1 !important;
  pointer-events: auto !important;
  visibility: visible !important;
  max-height: none !important; /* Remove maximum height restriction */
}

/* Ensure tab visibility */
[role="tab"] {
  visibility: visible !important;
  display: inline-block !important;
  position: relative !important;
  z-index: 1000 !important;
}

/* Ensure the dashboard grid doesn't clip content */
.dashboard-grid {
  overflow: visible !important;
  height: auto !important;
}

/* Fix for content within tab panels */
[role="tabpanel"] {
  padding: 1rem;
  border-top: 1px solid var(--border-color);
  margin-top: -1px;
  min-height: 0; /* Remove minimum height restriction */
  overflow: visible; /* Allow content to be visible */
  height: auto; /* Allow natural height */
}

/* Standardize all widget sizes to ensure consistent grid layout */
[data-testid^="widget-"] {
  width: 100% !important;
  min-height: 900px !important; /* Doubled from 450px to 900px */
  max-height: 900px !important; /* Doubled from 450px to 900px */
  overflow-y: auto !important; /* Enable scrolling for content that exceeds height */
  display: flex !important;
  flex-direction: column !important;
  margin-bottom: 1rem !important;
}

/* Adjust grid to ensure consistent columns regardless of screen size */
.dashboard-grid {
  display: grid !important;
  grid-template-columns: repeat(3, 1fr) !important; /* Force 3 columns */
  gap: 1rem !important;
  width: 100% !important;
  padding: 0.5rem !important;
}

/* Responsive adjustments to maintain consistent layout */
@media (max-width: 1200px) {
  .dashboard-grid {
    grid-template-columns: repeat(2, 1fr) !important; /* 2 columns on medium screens */
  }
  
  [data-testid^="widget-"] {
    min-height: 800px !important; /* Doubled from 400px to 800px */
    max-height: 800px !important; /* Doubled from 400px to 800px */
  }
}

@media (max-width: 768px) {
  .dashboard-grid {
    grid-template-columns: 1fr !important; /* Single column on small screens */
  }
  
  [data-testid^="widget-"] {
    min-height: 700px !important; /* Doubled from 350px to 700px */
    max-height: none !important; /* Remove max height on mobile for better content display */
  }
}
