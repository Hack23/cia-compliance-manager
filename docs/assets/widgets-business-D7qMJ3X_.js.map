{"version":3,"file":"widgets-business-D7qMJ3X_.js","sources":["../../src/components/widgets/businessvalue/ComplianceStatusWidget.tsx","../../src/components/widgets/businessvalue/CostEstimationWidget.tsx","../../src/components/widgets/businessvalue/ValueCreationWidget.tsx"],"sourcesContent":["import React, { useCallback, useMemo, useState } from \"react\";\nimport { WIDGET_ICONS, WIDGET_TITLES } from \"../../../constants/appConstants\";\nimport { COMPLIANCE_TEST_IDS } from \"../../../constants/testIds\";\nimport { SECURITY_ICONS } from \"../../../constants/uiConstants\";\nimport { useComplianceService } from \"../../../hooks/useComplianceService\";\nimport { CIAComponent, SecurityLevel } from \"../../../types/cia\";\nimport { StatusType } from \"../../../types/common/StatusTypes\";\nimport { ComplianceStatusDetails } from \"../../../types/compliance\";\nimport { isNullish } from \"../../../utils/typeGuards\";\nimport { getWidgetAriaDescription } from \"../../../utils/accessibility\";\nimport StatusBadge from \"../../common/StatusBadge\";\nimport WidgetContainer from \"../../common/WidgetContainer\";\nimport WidgetErrorBoundary from \"../../common/WidgetErrorBoundary\";\n\n// Add function to determine badge status with proper typing\nconst getBadgeStatus = (complianceScore: number): StatusType => {\n  if (complianceScore >= 80) return \"success\";\n  if (complianceScore >= 50) return \"warning\";\n  return \"error\";\n};\n\n/**\n * Props for ComplianceStatusWidget component\n */\nexport interface ComplianceStatusWidgetProps {\n  /**\n   * Selected availability level\n   */\n  availabilityLevel: SecurityLevel;\n\n  /**\n   * Selected integrity level\n   */\n  integrityLevel: SecurityLevel;\n\n  /**\n   * Selected confidentiality level\n   */\n  confidentialityLevel: SecurityLevel;\n\n  /**\n   * Optional industry for compliance context\n   */\n  industry?: string;\n\n  /**\n   * Optional region for compliance context\n   */\n  region?: string;\n\n  /**\n   * Optional CSS class name\n   */\n  className?: string;\n\n  /**\n   * Optional test ID for automated testing\n   */\n  testId?: string;\n}\n\n/**\n * ComplianceStatusWidget displays status of compliance with various frameworks\n *\n * ## Business Perspective\n *\n * This widget helps executives and compliance officers understand how their\n * security controls align with regulatory requirements and industry standards.\n * It helps organizations identify compliance gaps and prioritize security\n * investments to meet their regulatory obligations. üìã\n */\nconst ComplianceStatusWidget: React.FC<ComplianceStatusWidgetProps> = ({\n  availabilityLevel,\n  integrityLevel,\n  confidentialityLevel,\n  industry,\n  region,\n  className = \"\",\n  testId = COMPLIANCE_TEST_IDS.WIDGET,\n}) => {\n  // Use the compliance service\n  const {\n    complianceService,\n    error: serviceError,\n    isLoading,\n  } = useComplianceService();\n\n  // Active framework for detailed view\n  const [activeFramework, setActiveFramework] = useState<string | null>(null);\n\n  // Calculate overall security level with proper type safety\n  const overallSecurityLevel = useMemo(() => {\n    // Convert security levels to numeric values\n    const levelValues: Record<SecurityLevel, number> = {\n      None: 0,\n      Low: 1,\n      Moderate: 2,\n      High: 3,\n      \"Very High\": 4,\n    };\n\n    // Calculate the minimum security level as the overall level\n    const minValue = Math.min(\n      levelValues[availabilityLevel],\n      levelValues[integrityLevel],\n      levelValues[confidentialityLevel]\n    );\n\n    // Map numeric value back to SecurityLevel using a type-safe approach\n    const levels: SecurityLevel[] = [\n      \"None\",\n      \"Low\",\n      \"Moderate\",\n      \"High\",\n      \"Very High\",\n    ];\n    return levels.find((_, index) => index === minValue) || \"Moderate\";\n  }, [availabilityLevel, integrityLevel, confidentialityLevel]);\n\n  // Get compliance status with proper error handling\n  const complianceStatus = useMemo((): ComplianceStatusDetails | null => {\n    if (isLoading || serviceError || !complianceService) return null;\n\n    try {\n      // Use industry and region context when appropriate\n      return complianceService.getComplianceStatus(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel\n      );\n    } catch (err) {\n      console.error(\"Error getting compliance status:\", err);\n      return null;\n    }\n  }, [\n    complianceService,\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel,\n    industry, // Keep this dependency for potential future implementation\n    region, // Keep this dependency for potential future implementation\n    isLoading,\n    serviceError,\n  ]);\n\n  // Get status text for display with proper error handling\n  const getComplianceStatusText = useCallback((): string => {\n    if (isLoading) return \"Loading compliance status...\";\n    if (serviceError) return \"Error loading compliance status\";\n    if (!complianceStatus) return \"Unable to determine compliance status\";\n\n    try {\n      if (complianceService?.getComplianceStatusText) {\n        const statusText = complianceService.getComplianceStatusText(\n          availabilityLevel,\n          integrityLevel,\n          confidentialityLevel\n        );\n\n        if (!isNullish(statusText)) {\n          return statusText;\n        }\n      }\n\n      // Fallback if service doesn't provide status text\n      if (complianceStatus.status) {\n        return complianceStatus.status;\n      }\n\n      // Final fallback\n      return `Based on ${overallSecurityLevel} security level`;\n    } catch (err) {\n      console.error(\"Error getting compliance status text:\", err);\n      return \"Unable to determine compliance status\";\n    }\n  }, [\n    complianceService,\n    complianceStatus,\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel,\n    overallSecurityLevel,\n    isLoading,\n    serviceError,\n  ]);\n\n  // Define a single helper function for framework status badges\n  const getFrameworkStatusBadge = useCallback(\n    (framework: string): StatusType => {\n      if (!complianceStatus) return \"neutral\";\n\n      if (complianceStatus.compliantFrameworks.includes(framework)) {\n        return \"success\";\n      } else if (\n        complianceStatus.partiallyCompliantFrameworks.includes(framework)\n      ) {\n        return \"warning\";\n      } else {\n        return \"error\";\n      }\n    },\n    [complianceStatus]\n  );\n\n  // Get status text\n  const statusText = useMemo(\n    () => getComplianceStatusText(),\n    [getComplianceStatusText]\n  );\n\n  // Define gapAnalysis variable\n  const gapAnalysis = useMemo(() => {\n    if (isLoading || serviceError || !complianceService || !activeFramework)\n      return null;\n\n    try {\n      return complianceService.getComplianceGapAnalysis(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel,\n        activeFramework\n      );\n    } catch (err) {\n      console.error(\"Error getting gap analysis:\", err);\n      return null;\n    }\n  }, [\n    complianceService,\n    activeFramework,\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel,\n    isLoading,\n    serviceError,\n  ]);\n\n  // Create a type-safe implementation of getFrameworkRequiredLevel\n  const getFrameworkRequiredLevel = useCallback(\n    (framework: string, component: CIAComponent): SecurityLevel => {\n      // If the service is available, use it\n      if (complianceService?.getFrameworkRequiredLevel) {\n        try {\n          return complianceService.getFrameworkRequiredLevel(\n            framework,\n            component\n          );\n        } catch (err) {\n          console.error(`Error getting required level for ${framework}:`, err);\n        }\n      }\n\n      // Default fallback levels based on typical requirements\n      const defaultLevels: Record<\n        string,\n        Record<CIAComponent, SecurityLevel>\n      > = {\n        \"PCI DSS\": {\n          availability: \"High\",\n          integrity: \"High\",\n          confidentiality: \"High\",\n        },\n        HIPAA: {\n          availability: \"High\",\n          integrity: \"High\",\n          confidentiality: \"High\",\n        },\n        GDPR: {\n          availability: \"Moderate\",\n          integrity: \"High\",\n          confidentiality: \"High\",\n        },\n        \"ISO 27001\": {\n          availability: \"Moderate\",\n          integrity: \"Moderate\",\n          confidentiality: \"Moderate\",\n        },\n        \"SOC 2\": {\n          availability: \"Moderate\",\n          integrity: \"Moderate\",\n          confidentiality: \"Moderate\",\n        },\n      };\n\n      // Return the default if available, otherwise return Moderate as a safe fallback\n      return defaultLevels[framework]?.[component] || \"Moderate\";\n    },\n    [complianceService]\n  );\n\n  // Get framework description with error handling\n  const getFrameworkDescription = useCallback(\n    (framework: string): string => {\n      if (!complianceService) return `${framework} requirements`;\n\n      try {\n        if (typeof complianceService.getFrameworkDescription === \"function\") {\n          const description =\n            complianceService.getFrameworkDescription(framework);\n          return description || `${framework} requirements`;\n        }\n        return `${framework} requirements`;\n      } catch (err) {\n        console.error(`Error getting description for ${framework}:`, err);\n        return `${framework} requirements`;\n      }\n    },\n    [complianceService]\n  );\n\n  return (\n    <WidgetErrorBoundary widgetName=\"Compliance Status\">\n      <WidgetContainer\n        title={WIDGET_TITLES.COMPLIANCE_STATUS || \"Compliance Status\"}\n        icon={WIDGET_ICONS.COMPLIANCE_STATUS || \"üìã\"}\n        className={className}\n        testId={testId}\n        isLoading={isLoading}\n        error={serviceError}\n      >\n      <div \n        className=\"p-md sm:p-lg\"\n        role=\"region\"\n        aria-label={getWidgetAriaDescription(\n          \"Compliance Status\",\n          \"Status of compliance with regulatory frameworks and industry standards\"\n        )}\n      >\n        {/* Add high-level description */}\n        <section \n          className=\"mb-md p-md bg-info-light/10 dark:bg-info-dark/20 rounded-md\"\n          aria-labelledby=\"compliance-description-heading\"\n        >\n          <p id=\"compliance-description-heading\" className=\"text-body\">\n            This widget shows your compliance status with various regulatory\n            frameworks and industry standards based on your selected security\n            levels.\n          </p>\n        </section>\n\n        {/* Overall Compliance Status */}\n        <section \n          className=\"mb-lg\"\n          aria-labelledby=\"overall-compliance-heading\"\n        >\n          <h3 id=\"overall-compliance-heading\" className=\"text-heading font-medium mb-sm\">\n            Overall Compliance Status\n          </h3>\n          <div\n            className=\"p-md bg-neutral-light/10 dark:bg-neutral-dark/20 rounded-md border border-neutral-light dark:border-neutral-dark\"\n            data-testid={COMPLIANCE_TEST_IDS.COMPLIANCE_STATUS_SUMMARY}\n            role=\"group\"\n            aria-label=\"Compliance status summary\"\n          >\n            <div className=\"flex justify-between items-center\">\n              <div className=\"flex items-center\">\n                <span className=\"text-title mr-sm text-info\" aria-hidden=\"true\">\n                  {SECURITY_ICONS.compliance || \"üìã\"}\n                </span>\n                <span className=\"font-medium\">Compliance Status</span>\n              </div>\n              <StatusBadge\n                status={getBadgeStatus(complianceStatus?.complianceScore ?? 0)}\n                testId={COMPLIANCE_TEST_IDS.COMPLIANCE_STATUS_BADGE}\n              >\n                {statusText}\n              </StatusBadge>\n            </div>\n\n            {complianceStatus && (\n              <div className=\"mt-md\">\n                <div className=\"flex justify-between items-center mb-sm\">\n                  <span \n                    className=\"text-body text-neutral dark:text-neutral-light\"\n                    id=\"compliance-score-label\"\n                  >\n                    Compliance Score\n                  </span>\n                  <span\n                    className=\"font-bold\"\n                    data-testid={COMPLIANCE_TEST_IDS.COMPLIANCE_SCORE}\n                    aria-labelledby=\"compliance-score-label\"\n                    role=\"status\"\n                    aria-live=\"polite\"\n                  >\n                    {complianceStatus.complianceScore ?? 0}%\n                  </span>\n                </div>\n                <div className=\"relative pt-1\">\n                  <div \n                    className=\"overflow-hidden h-2 mb-sm text-xs flex rounded bg-info-light/20 dark:bg-info-dark\"\n                    role=\"progressbar\"\n                    aria-valuenow={complianceStatus.complianceScore ?? 0}\n                    aria-valuemin={0}\n                    aria-valuemax={100}\n                    aria-label={`Compliance score: ${complianceStatus.complianceScore ?? 0} percent`}\n                  >\n                    <div\n                      style={{\n                        width: `${complianceStatus.complianceScore ?? 0}%`,\n                      }}\n                      className=\"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-info dark:bg-info-light\"\n                      data-testid={COMPLIANCE_TEST_IDS.COMPLIANCE_SCORE_BAR}\n                    ></div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </section>\n\n        {/* Compliant Frameworks */}\n        {complianceStatus &&\n          complianceStatus.compliantFrameworks.length > 0 && (\n            <div className=\"mb-lg\">\n              <h3 className=\"text-heading font-medium mb-sm\">Compliant Frameworks</h3>\n              <div\n                className=\"grid grid-cols-1 sm:grid-cols-2 gap-md\"\n                data-testid={COMPLIANCE_TEST_IDS.COMPLIANT_FRAMEWORKS_LIST}\n              >\n                {complianceStatus.compliantFrameworks.map(\n                  (framework, index) => (\n                    <div\n                      key={framework}\n                      className={`p-md bg-success-light/10 dark:bg-success-dark/20 rounded-md border border-success-light dark:border-success-dark cursor-pointer transition-all duration-normal ${\n                        activeFramework === framework\n                          ? \"ring-2 ring-success dark:ring-success-light\"\n                          : \"\"\n                      }`}\n                      onClick={() => setActiveFramework(framework)}\n                      data-testid={`${COMPLIANCE_TEST_IDS.FRAMEWORK_ITEM_PREFIX}-${index}`}\n                    >\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"font-medium\">{framework}</span>\n                        <StatusBadge\n                          status={getFrameworkStatusBadge(framework)}\n                          testId={`framework-status-badge-${index}`}\n                        >\n                          Compliant\n                        </StatusBadge>\n                      </div>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                        {getFrameworkDescription(framework)}\n                      </p>\n                    </div>\n                  )\n                )}\n              </div>\n            </div>\n          )}\n\n        {/* Partially Compliant Frameworks */}\n        {complianceStatus &&\n          complianceStatus.partiallyCompliantFrameworks.length > 0 && (\n            <div className=\"mb-6\">\n              <h3 className=\"text-lg font-medium mb-2\">\n                Partially Compliant Frameworks\n              </h3>\n              <div\n                className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\"\n                data-testid={\n                  COMPLIANCE_TEST_IDS.PARTIALLY_COMPLIANT_FRAMEWORKS_LIST\n                }\n              >\n                {complianceStatus.partiallyCompliantFrameworks.map(\n                  (framework, index) => (\n                    <div\n                      key={framework}\n                      className={`p-3 bg-yellow-50 dark:bg-yellow-900 dark:bg-opacity-20 rounded-lg border border-yellow-200 dark:border-yellow-800 cursor-pointer ${\n                        activeFramework === framework\n                          ? \"ring-2 ring-yellow-500 dark:ring-yellow-400\"\n                          : \"\"\n                      }`}\n                      onClick={() => setActiveFramework(framework)}\n                      data-testid={`${COMPLIANCE_TEST_IDS.FRAMEWORK_ITEM_PREFIX}-partial-${index}`}\n                    >\n                      <div className=\"flex justify-between items-center mb-1\">\n                        <span className=\"font-medium\">{framework}</span>\n                        <StatusBadge\n                          status={getFrameworkStatusBadge(framework)}\n                          testId={`framework-partial-status-badge-${index}`}\n                        >\n                          Partially Compliant\n                        </StatusBadge>\n                      </div>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                        {getFrameworkDescription(framework)}\n                      </p>\n                    </div>\n                  )\n                )}\n              </div>\n            </div>\n          )}\n\n        {/* Non-Compliant Frameworks */}\n        {complianceStatus &&\n          complianceStatus.nonCompliantFrameworks.length > 0 && (\n            <div className=\"mb-6\">\n              <h3 className=\"text-lg font-medium mb-2\">\n                Non-Compliant Frameworks\n              </h3>\n              <div\n                className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\"\n                data-testid={COMPLIANCE_TEST_IDS.NON_COMPLIANT_FRAMEWORKS_LIST}\n              >\n                {complianceStatus.nonCompliantFrameworks.map(\n                  (framework, index) => (\n                    <div\n                      key={framework}\n                      className={`p-3 bg-red-50 dark:bg-red-900 dark:bg-opacity-20 rounded-lg border border-red-200 dark:border-red-800 cursor-pointer ${\n                        activeFramework === framework\n                          ? \"ring-2 ring-red-500 dark:ring-red-400\"\n                          : \"\"\n                      }`}\n                      onClick={() => setActiveFramework(framework)}\n                      data-testid={`${COMPLIANCE_TEST_IDS.FRAMEWORK_ITEM_PREFIX}-non-${index}`}\n                    >\n                      <div className=\"flex justify-between items-center mb-1\">\n                        <span className=\"font-medium\">{framework}</span>\n                        <StatusBadge\n                          status={getFrameworkStatusBadge(framework)}\n                          testId={`framework-non-status-badge-${index}`}\n                        >\n                          Non-Compliant\n                        </StatusBadge>\n                      </div>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                        {getFrameworkDescription(framework)}\n                      </p>\n                    </div>\n                  )\n                )}\n              </div>\n            </div>\n          )}\n\n        {/* Framework Gap Analysis */}\n        {activeFramework && (\n          <div className=\"mt-6\">\n            <h3 className=\"text-lg font-medium mb-2\">\n              {activeFramework} Gap Analysis\n            </h3>\n            <div\n              className=\"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\"\n              data-testid={COMPLIANCE_TEST_IDS.FRAMEWORK_GAP_ANALYSIS}\n            >\n              {gapAnalysis ? (\n                <div>\n                  <div className=\"mb-3\">\n                    <h4 className=\"font-medium mb-1\">Status</h4>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                      {gapAnalysis.isCompliant\n                        ? `Your security controls meet the requirements for ${activeFramework}.`\n                        : `Your security controls do not fully meet the requirements for ${activeFramework}.`}\n                    </p>\n                  </div>\n\n                  {/* CIA Component Analysis */}\n                  <div className=\"mb-3\">\n                    <h4 className=\"font-medium mb-1\">Component Requirements</h4>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 mt-2\">\n                      {[\"availability\", \"integrity\", \"confidentiality\"].map(\n                        (comp) => {\n                          const componentType = comp as CIAComponent;\n                          const currentLevel =\n                            componentType === \"availability\"\n                              ? availabilityLevel\n                              : componentType === \"integrity\"\n                              ? integrityLevel\n                              : confidentialityLevel;\n                          const requiredLevel = getFrameworkRequiredLevel(\n                            activeFramework,\n                            componentType\n                          );\n                          const isMeeting =\n                            getSecurityLevelValue(currentLevel) >=\n                            getSecurityLevelValue(requiredLevel);\n\n                          return (\n                            <div\n                              key={comp}\n                              className={`p-2 rounded-lg ${\n                                isMeeting\n                                  ? \"bg-green-50 dark:bg-green-900 dark:bg-opacity-20\"\n                                  : \"bg-red-50 dark:bg-red-900 dark:bg-opacity-20\"\n                              }`}\n                            >\n                              <div className=\"text-xs font-medium mb-1\">\n                                {componentType.charAt(0).toUpperCase() +\n                                  componentType.slice(1)}\n                              </div>\n                              <div className=\"flex justify-between text-sm\">\n                                <span>\n                                  Current:{\" \"}\n                                  <span className=\"font-medium\">\n                                    {currentLevel}\n                                  </span>\n                                </span>\n                                <span>\n                                  Required:{\" \"}\n                                  <span className=\"font-medium\">\n                                    {requiredLevel}\n                                  </span>\n                                </span>\n                              </div>\n                              <div className=\"mt-1 text-xs text-right\">\n                                <StatusBadge\n                                  status={isMeeting ? \"success\" : \"error\"}\n                                  testId={`${comp}-requirement-status`}\n                                >\n                                  {isMeeting ? \"Meeting\" : \"Not Meeting\"}\n                                </StatusBadge>\n                              </div>\n                            </div>\n                          );\n                        }\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Gap Analysis */}\n                  {gapAnalysis.gaps && gapAnalysis.gaps.length > 0 && (\n                    <div className=\"mb-3\">\n                      <h4 className=\"font-medium mb-1\">Compliance Gaps</h4>\n                      <ul className=\"list-disc list-inside text-sm text-gray-600 dark:text-gray-400\">\n                        {gapAnalysis.gaps.map((gap, index) => (\n                          <li key={index}>\n                            {typeof gap === \"string\"\n                              ? gap\n                              : gap.framework ||\n                                gap.frameworkDescription ||\n                                \"Undefined compliance gap\"}\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n\n                  {/* Recommendations */}\n                  {gapAnalysis.recommendations &&\n                    gapAnalysis.recommendations.length > 0 && (\n                      <div>\n                        <h4 className=\"font-medium mb-1\">Recommendations</h4>\n                        <ul className=\"list-disc list-inside text-sm text-gray-600 dark:text-gray-400\">\n                          {gapAnalysis.recommendations.map((rec, index) => (\n                            <li key={index}>{rec}</li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n                </div>\n              ) : (\n                <div\n                  className=\"text-center text-gray-500 dark:text-gray-400 py-6\"\n                  data-testid={COMPLIANCE_TEST_IDS.NO_GAP_ANALYSIS}\n                >\n                  No gap analysis available for this framework.\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Compliance Tips */}\n        <div className=\"mt-6 p-3 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded-lg border border-blue-200 dark:border-blue-800\">\n          <div className=\"flex items-center mb-2\">\n            <span className=\"text-blue-500 dark:text-blue-400 mr-2\">üí°</span>\n            <h3 className=\"font-medium\">Compliance Tips</h3>\n          </div>\n          <ul\n            className=\"text-sm space-y-1 list-disc list-inside text-gray-600 dark:text-gray-400\"\n            data-testid={COMPLIANCE_TEST_IDS.COMPLIANCE_TIPS_LIST}\n          >\n            {complianceStatus && complianceStatus.complianceScore ? (\n              complianceStatus.complianceScore < 50 ? (\n                <>\n                  <li>Focus on implementing foundational security controls</li>\n                  <li>\n                    Prioritize controls that address multiple compliance\n                    frameworks\n                  </li>\n                  <li>\n                    Consider engaging a compliance specialist to create a\n                    roadmap\n                  </li>\n                </>\n              ) : complianceStatus.complianceScore < 80 ? (\n                <>\n                  <li>\n                    Address specific gaps in partially compliant frameworks\n                  </li>\n                  <li>\n                    Implement regular compliance monitoring and validation\n                  </li>\n                  <li>Document your compliance controls and processes</li>\n                </>\n              ) : (\n                <>\n                  <li>\n                    Maintain your strong compliance posture with regular reviews\n                  </li>\n                  <li>\n                    Prepare for upcoming regulatory changes and new frameworks\n                  </li>\n                  <li>\n                    Consider compliance certification to showcase your\n                    capabilities\n                  </li>\n                </>\n              )\n            ) : (\n              <>\n                <li>\n                  Implement controls across all CIA components for balanced\n                  compliance\n                </li>\n                <li>\n                  Start with the frameworks most relevant to your industry\n                </li>\n                <li>\n                  Document your security controls to demonstrate compliance\n                </li>\n              </>\n            )}\n          </ul>\n        </div>\n      </div>\n    </WidgetContainer>\n    </WidgetErrorBoundary>\n  );\n};\n\n// Helper function to convert security level to numeric value\nfunction getSecurityLevelValue(level: SecurityLevel): number {\n  const levelValues: Record<SecurityLevel, number> = {\n    None: 0,\n    Low: 1,\n    Moderate: 2,\n    High: 3,\n    \"Very High\": 4,\n  };\n  return levelValues[level] || 0;\n}\n\nexport default ComplianceStatusWidget;\n","import React, { useMemo } from \"react\";\nimport { WIDGET_ICONS, WIDGET_TITLES } from \"../../../constants/appConstants\";\nimport { COST_ESTIMATION_WIDGET_IDS } from \"../../../constants/testIds\";\nimport { useCIAContentService } from \"../../../hooks/useCIAContentService\";\nimport { CIAComponent, SecurityLevel } from \"../../../types/cia\";\nimport { CostEstimationWidgetProps } from \"../../../types/widgets\";\nimport { calculateTotalSecurityCost } from \"../../../utils/costCalculationUtils\";\nimport { formatCurrency } from \"../../../utils/formatUtils\";\nimport { getImplementationComplexity } from \"../../../utils/riskUtils\";\nimport { getSecurityLevelValue } from \"../../../utils/securityLevelUtils\";\nimport { isArray, isNullish, isString } from \"../../../utils/typeGuards\";\nimport { getWidgetAriaDescription } from \"../../../utils/accessibility\";\nimport SecurityLevelBadge from \"../../common/SecurityLevelBadge\";\nimport WidgetContainer from \"../../common/WidgetContainer\";\nimport WidgetErrorBoundary from \"../../common/WidgetErrorBoundary\";\n\n/**\n * Widget for estimating implementation and operational costs\n *\n * ## Business Perspective\n *\n * This widget provides financial stakeholders with cost estimates\n * for implementing and maintaining the selected security levels,\n * helping with budget planning and investment decisions related\n * to security initiatives. üí≤\n */\nconst CostEstimationWidget: React.FC<CostEstimationWidgetProps> = ({\n  availabilityLevel,\n  integrityLevel,\n  confidentialityLevel,\n  className = \"\",\n  testId = \"cost-estimation-widget\",\n}) => {\n  // Use the content service\n  const {\n    ciaContentService,\n    error: serviceError,\n    isLoading,\n  } = useCIAContentService();\n\n  // Calculate costs using consistent utility function\n  const {\n    totalCapex,\n    totalOpex,\n    totalCost,\n    availabilityCost,\n    integrityCost,\n    confidentialityCost,\n  } = useMemo(\n    () =>\n      calculateTotalSecurityCost(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel\n      ),\n    [availabilityLevel, integrityLevel, confidentialityLevel]\n  );\n\n  // Calculate implementation complexity using existing utility\n  const implementationComplexity = useMemo(\n    () =>\n      getImplementationComplexity(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel\n      ),\n    [availabilityLevel, integrityLevel, confidentialityLevel]\n  );\n\n  // Calculate FTE requirements using same approach as TechnicalDetailsWidget\n  const fteRequirements = useMemo(() => {\n    // FTE mapping from security level - same as in TechnicalDetailsWidget\n    const levelFteMap: Record<SecurityLevel, number> = {\n      None: 0.1,\n      Low: 0.25,\n      Moderate: 0.5,\n      High: 1,\n      \"Very High\": 2,\n    };\n\n    // Calculate FTEs for each component based on their respective security levels\n    const availFte = levelFteMap[availabilityLevel] || 0.5;\n    const integFte = levelFteMap[integrityLevel] || 0.5;\n    const confFte = levelFteMap[confidentialityLevel] || 0.5;\n\n    // Find the max FTE across all components to match TechnicalDetailsWidget exactly\n    const maxFte = Math.max(availFte, integFte, confFte);\n\n    // Implementation is the primary FTE\n    const implementationFte = maxFte;\n\n    // Maintenance FTE is typically 60% of implementation\n    const maintenanceFte = Number((implementationFte * 0.6).toFixed(1));\n\n    return {\n      implementation: implementationFte,\n      maintenance: maintenanceFte,\n      total: Number((implementationFte + maintenanceFte).toFixed(1)),\n    };\n  }, [availabilityLevel, integrityLevel, confidentialityLevel]);\n\n  // Get expertise required - using defined type and handling missing property\n  const getExpertiseForComponent = (\n    component: CIAComponent,\n    level: SecurityLevel\n  ): string[] => {\n    try {\n      if (isNullish(ciaContentService)) {\n        return getDefaultExpertise(component, level);\n      }\n\n      const details = ciaContentService.getComponentDetails(component, level);\n\n      // Since expertiseRequired is not in CIADetails type, we need to handle it differently\n      // Use runtime checks for safety without type assertions\n      if (!isNullish(details) && typeof details === \"object\" && \"expertiseRequired\" in details) {\n        const expertise = (details as { expertiseRequired?: unknown }).expertiseRequired;\n        if (isArray(expertise) && expertise.every(item => isString(item))) {\n          return expertise as string[];\n        }\n        if (isString(expertise)) {\n          return [expertise];\n        }\n      }\n\n      return getDefaultExpertise(component, level);\n    } catch (err) {\n      console.error(`Error getting expertise for ${component}:`, err);\n      return getDefaultExpertise(component, level);\n    }\n  };\n\n  // Get highest component expertise\n  const expertiseRequired = useMemo(() => {\n    // Get the component with the highest security level for expertise determination\n    const highestComponent = [\n      { type: \"availability\" as CIAComponent, level: availabilityLevel },\n      { type: \"integrity\" as CIAComponent, level: integrityLevel },\n      {\n        type: \"confidentiality\" as CIAComponent,\n        level: confidentialityLevel,\n      },\n    ].sort(\n      (a, b) => getSecurityLevelValue(b.level) - getSecurityLevelValue(a.level)\n    )[0];\n\n    return getExpertiseForComponent(\n      highestComponent.type,\n      highestComponent.level\n    );\n  }, [availabilityLevel, integrityLevel, confidentialityLevel]);\n\n  // Calculate the complexity percentage for visualization\n  const complexityPercentage = useMemo(() => {\n    const complexityMap: Record<string, number> = {\n      Low: 25,\n      Moderate: 50,\n      High: 75,\n      \"Very High\": 100,\n    };\n    return complexityMap[implementationComplexity] || 0;\n  }, [implementationComplexity]);\n\n  // Calculate cost breakdown percentages for visualization\n  const costBreakdown = useMemo(() => {\n    const totalComponentCost =\n      availabilityCost.capex +\n      availabilityCost.opex +\n      integrityCost.capex +\n      integrityCost.opex +\n      confidentialityCost.capex +\n      confidentialityCost.opex;\n\n    return {\n      availability:\n        totalComponentCost > 0\n          ? (\n              ((availabilityCost.capex + availabilityCost.opex) /\n                totalComponentCost) *\n              100\n            ).toFixed(0)\n          : \"0\",\n      integrity:\n        totalComponentCost > 0\n          ? (\n              ((integrityCost.capex + integrityCost.opex) /\n                totalComponentCost) *\n              100\n            ).toFixed(0)\n          : \"0\",\n      confidentiality:\n        totalComponentCost > 0\n          ? (\n              ((confidentialityCost.capex + confidentialityCost.opex) /\n                totalComponentCost) *\n              100\n            ).toFixed(0)\n          : \"0\",\n    };\n  }, [availabilityCost, integrityCost, confidentialityCost]);\n\n  // Calculate capex vs opex ratio\n  const costRatio = useMemo(() => {\n    const total = totalCapex + totalOpex;\n    return {\n      capex: total > 0 ? ((totalCapex / total) * 100).toFixed(0) : \"0\",\n      opex: total > 0 ? ((totalOpex / total) * 100).toFixed(0) : \"0\",\n    };\n  }, [totalCapex, totalOpex]);\n\n  return (\n    <WidgetErrorBoundary widgetName=\"Cost Estimation\">\n      <WidgetContainer\n        title={WIDGET_TITLES.COST_ESTIMATION || \"Cost Estimation\"}\n        icon={WIDGET_ICONS.COST_ESTIMATION || \"üí∞\"}\n        className={className}\n        testId={testId}\n        isLoading={isLoading}\n        error={serviceError}\n      >\n      <div \n        className=\"p-md sm:p-lg\"\n        role=\"region\"\n        aria-label={getWidgetAriaDescription(\n          \"Cost Estimation\",\n          \"Cost estimates for implementing and maintaining security controls\"\n        )}\n      >\n        {/* Introduction */}\n        <section \n          className=\"mb-md p-md bg-info-light/10 dark:bg-info-dark/20 rounded-md\"\n          aria-labelledby=\"cost-intro-heading\"\n        >\n          <p id=\"cost-intro-heading\" className=\"text-body\">\n            This widget provides cost estimates for implementing and maintaining\n            security controls based on your selected security levels across the\n            CIA triad.\n          </p>\n        </section>\n\n        {/* Summary cost section - using direct JSX instead of InfoCard */}\n        <section \n          className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-md mb-lg\"\n          aria-labelledby=\"cost-summary-heading\"\n        >\n          <h3 id=\"cost-summary-heading\" className=\"sr-only\">Cost Summary</h3>\n          <div className=\"p-md bg-white dark:bg-gray-800 rounded-md shadow-md border border-neutral-light dark:border-neutral-dark\">\n            <div className=\"flex items-center mb-sm\">\n              <span className=\"mr-sm text-info\" aria-hidden=\"true\">üíº</span>\n              <div className=\"text-body text-neutral dark:text-neutral-light\">\n                Implementation Cost\n              </div>\n            </div>\n            <div \n              className=\"text-title font-bold text-info dark:text-info-light\"\n              aria-label={`Implementation cost: ${formatCurrency(totalCapex)}`}\n            >\n              {formatCurrency(totalCapex)}\n            </div>\n            <div className=\"text-caption text-neutral dark:text-neutral-light\">\n              One-time capital expenditure\n            </div>\n          </div>\n\n          <div className=\"p-md bg-white dark:bg-gray-800 rounded-md shadow-md border border-neutral-light dark:border-neutral-dark\">\n            <div className=\"flex items-center mb-sm\">\n              <span className=\"mr-sm text-success\" aria-hidden=\"true\">üîÑ</span>\n              <div className=\"text-body text-neutral dark:text-neutral-light\">\n                Annual Operations\n              </div>\n            </div>\n            <div \n              className=\"text-title font-bold text-success dark:text-success-light\"\n              aria-label={`Annual operations cost: ${formatCurrency(totalOpex)}`}\n            >\n              {formatCurrency(totalOpex)}\n            </div>\n            <div className=\"text-caption text-neutral dark:text-neutral-light\">\n              Yearly operational expenses\n            </div>\n          </div>\n\n          <div className=\"p-md bg-white dark:bg-gray-800 rounded-md shadow-md border border-neutral-light dark:border-neutral-dark\">\n            <div className=\"flex items-center mb-sm\">\n              <span className=\"mr-sm text-primary\" aria-hidden=\"true\">üí≤</span>\n              <div className=\"text-body text-neutral dark:text-neutral-light\">\n                Total First Year Cost\n              </div>\n            </div>\n            <div \n              className=\"text-title font-bold text-primary-dark dark:text-primary-light\"\n              aria-label={`Total first year cost: ${formatCurrency(totalCost)}`}\n            >\n              {formatCurrency(totalCost)}\n            </div>\n            <div className=\"text-caption text-neutral dark:text-neutral-light\">\n              Implementation + first year operations\n            </div>\n          </div>\n        </section>\n\n        {/* CAPEX vs OPEX ratio visualization */}\n        <div className=\"mb-lg\">\n          <h3 className=\"text-heading font-medium mb-md\">Cost Breakdown</h3>\n          <div className=\"p-md bg-white dark:bg-gray-800 rounded-md shadow-md border border-neutral-light dark:border-neutral-dark\">\n            <div className=\"flex justify-between items-center mb-1\">\n              <div className=\"text-sm font-medium\">CAPEX</div>\n              <div className=\"text-sm font-medium\">OPEX</div>\n            </div>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 mb-2\">\n              <div\n                className=\"h-3 bg-blue-500 rounded-l-full\"\n                style={{ width: `${costRatio.capex}%` }}\n              ></div>\n            </div>\n            <div className=\"flex justify-between text-xs text-gray-600 dark:text-gray-400\">\n              <div>\n                {costRatio.capex}% ({formatCurrency(totalCapex)})\n              </div>\n              <div>\n                {costRatio.opex}% ({formatCurrency(totalOpex)})\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Implementation details grid */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6\">\n          {/* Implementation complexity */}\n          <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n            <h4 className=\"text-md font-medium mb-3\">\n              Implementation Complexity\n            </h4>\n            <div className=\"mb-3\">\n              <div className=\"text-lg font-bold text-primary-dark dark:text-primary-light\">\n                {implementationComplexity}\n              </div>\n              <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-2\">\n                <div\n                  className=\"h-2.5 bg-primary dark:bg-primary-light rounded-full\"\n                  style={{ width: `${complexityPercentage}%` }}\n                ></div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-500\">\n              Based on combined complexity across CIA components\n            </div>\n          </div>\n\n          {/* Personnel requirements */}\n          <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n            <h4 className=\"text-md font-medium mb-3\">Personnel Requirements</h4>\n            <div className=\"grid grid-cols-1 gap-3\">\n              <div className=\"flex justify-between items-center\">\n                <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Implementation Team\n                </div>\n                <div className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">\n                  {fteRequirements.implementation} FTE\n                </div>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Ongoing Maintenance\n                </div>\n                <div className=\"text-lg font-bold text-green-600 dark:text-green-400\">\n                  {fteRequirements.maintenance} FTE\n                </div>\n              </div>\n              <div className=\"flex justify-between items-center pt-2 mt-2 border-t border-gray-200 dark:border-gray-700\">\n                <div className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">\n                  Annual Personnel Cost\n                </div>\n                <div className=\"text-lg font-bold\">\n                  {formatCurrency(fteRequirements.total * 120000)}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Component breakdown */}\n        <div className=\"mb-6\">\n          <h3 className=\"text-lg font-medium mb-3\">\n            Cost by Security Component\n          </h3>\n          <div className=\"grid grid-cols-1 gap-3\">\n            {/* Using SecurityLevelBadge component for consistency with other widgets */}\n            <div className=\"p-md bg-primary-light/10 dark:bg-primary-dark/20 rounded-md\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <div className=\"font-medium text-primary-dark dark:text-primary-light flex items-center\">\n                  <span className=\"mr-2\">üîí</span>Confidentiality\n                </div>\n                <SecurityLevelBadge\n                  category=\"\"\n                  level={confidentialityLevel}\n                  colorClass=\"bg-primary-light/20 dark:bg-primary-dark/20\"\n                  textClass=\"text-primary-dark dark:text-primary-light\"\n                  testId={COST_ESTIMATION_WIDGET_IDS.label('conf-level')}\n                />\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <div className=\"text-md font-bold text-primary-dark dark:text-primary-light\">\n                  {formatCurrency(\n                    confidentialityCost.capex + confidentialityCost.opex\n                  )}\n                </div>\n                <div className=\"text-sm bg-primary-light/20 dark:bg-primary-dark/30 px-2 py-1 rounded\">\n                  {costBreakdown.confidentiality}% of total\n                </div>\n              </div>\n              <div className=\"text-xs mt-2 text-gray-600 dark:text-gray-400 flex justify-between\">\n                <span>CAPEX: {formatCurrency(confidentialityCost.capex)}</span>\n                <span>OPEX: {formatCurrency(confidentialityCost.opex)}</span>\n              </div>\n            </div>\n\n            <div className=\"p-3 bg-green-50 dark:bg-green-900 dark:bg-opacity-20 rounded-lg\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <div className=\"font-medium text-green-800 dark:text-green-300 flex items-center\">\n                  <span className=\"mr-2\">‚úì</span>Integrity\n                </div>\n                <SecurityLevelBadge\n                  category=\"\"\n                  level={integrityLevel}\n                  colorClass=\"bg-green-100 dark:bg-green-900 dark:bg-opacity-20\"\n                  textClass=\"text-green-800 dark:text-green-300\"\n                  testId={COST_ESTIMATION_WIDGET_IDS.label('int-level')}\n                />\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <div className=\"text-md font-bold text-green-600 dark:text-green-400\">\n                  {formatCurrency(integrityCost.capex + integrityCost.opex)}\n                </div>\n                <div className=\"text-sm bg-green-100 dark:bg-green-900 dark:bg-opacity-30 px-2 py-1 rounded\">\n                  {costBreakdown.integrity}% of total\n                </div>\n              </div>\n              <div className=\"text-xs mt-2 text-gray-600 dark:text-gray-400 flex justify-between\">\n                <span>CAPEX: {formatCurrency(integrityCost.capex)}</span>\n                <span>OPEX: {formatCurrency(integrityCost.opex)}</span>\n              </div>\n            </div>\n\n            <div className=\"p-3 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded-lg\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <div className=\"font-medium text-blue-800 dark:text-blue-300 flex items-center\">\n                  <span className=\"mr-2\">‚è±Ô∏è</span>Availability\n                </div>\n                <SecurityLevelBadge\n                  category=\"\"\n                  level={availabilityLevel}\n                  colorClass=\"bg-blue-100 dark:bg-blue-900 dark:bg-opacity-20\"\n                  textClass=\"text-blue-800 dark:text-blue-300\"\n                  testId={COST_ESTIMATION_WIDGET_IDS.label('avail-level')}\n                />\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <div className=\"text-md font-bold text-blue-600 dark:text-blue-400\">\n                  {formatCurrency(\n                    availabilityCost.capex + availabilityCost.opex\n                  )}\n                </div>\n                <div className=\"text-sm bg-blue-100 dark:bg-blue-900 dark:bg-opacity-30 px-2 py-1 rounded\">\n                  {costBreakdown.availability}% of total\n                </div>\n              </div>\n              <div className=\"text-xs mt-2 text-gray-600 dark:text-gray-400 flex justify-between\">\n                <span>CAPEX: {formatCurrency(availabilityCost.capex)}</span>\n                <span>OPEX: {formatCurrency(availabilityCost.opex)}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Expertise required */}\n        <div className=\"mb-6\">\n          <h3 className=\"text-lg font-medium mb-3\">Expertise Required</h3>\n          <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n            <ul className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n              {expertiseRequired.map((expertise: string, index: number) => (\n                <li\n                  key={`expertise-${index}`}\n                  className=\"flex items-center text-sm\"\n                >\n                  <span className=\"mr-2 text-blue-500\">‚Ä¢</span>\n                  <span>{expertise}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n\n        {/* Cost notes */}\n        <div className=\"p-3 bg-yellow-50 dark:bg-yellow-900 dark:bg-opacity-20 rounded-lg\">\n          <h4 className=\"text-md font-medium mb-2 flex items-center\">\n            <span className=\"mr-2\">üí°</span>Cost Notes\n          </h4>\n          <ul className=\"list-disc list-inside space-y-1 text-sm text-gray-600 dark:text-gray-400 pl-2\">\n            <li>\n              Estimates are based on industry averages for the selected security\n              levels\n            </li>\n            <li>\n              Actual costs may vary based on your organization's size and\n              industry\n            </li>\n            <li>\n              FTE calculations assume an average annual cost of $120,000 per\n              full-time employee\n            </li>\n            <li>\n              Consider consulting with security professionals for more accurate\n              cost projections\n            </li>\n          </ul>\n        </div>\n      </div>\n    </WidgetContainer>\n    </WidgetErrorBoundary>\n  );\n};\n\n// Helper function to provide default expertise requirements\nfunction getDefaultExpertise(\n  component: CIAComponent,\n  level: SecurityLevel\n): string[] {\n  if (component === \"confidentiality\") {\n    switch (level) {\n      case \"None\":\n        return [\"No specific expertise required\"];\n      case \"Low\":\n        return [\"Basic security knowledge\", \"Access control fundamentals\"];\n      case \"Moderate\":\n        return [\n          \"Identity management\",\n          \"Encryption technologies\",\n          \"Authentication systems\",\n        ];\n      case \"High\":\n        return [\n          \"Advanced cryptography\",\n          \"Identity and access management\",\n          \"Security architecture\",\n          \"Data protection\",\n        ];\n      case \"Very High\":\n        return [\n          \"Security architecture\",\n          \"Advanced cryptography\",\n          \"Zero-trust implementation\",\n          \"Data protection specialization\",\n          \"Hardware security\",\n        ];\n      default:\n        return [\"General security knowledge\"];\n    }\n  }\n\n  if (component === \"integrity\") {\n    switch (level) {\n      case \"None\":\n        return [\"No specific expertise required\"];\n      case \"Low\":\n        return [\"Basic data validation\", \"Error handling\"];\n      case \"Moderate\":\n        return [\n          \"Data validation techniques\",\n          \"Database integrity\",\n          \"Error handling\",\n        ];\n      case \"High\":\n        return [\n          \"Cryptographic verification\",\n          \"Digital signatures\",\n          \"Secure logging\",\n          \"Change management\",\n        ];\n      case \"Very High\":\n        return [\n          \"Advanced cryptography\",\n          \"Formal verification\",\n          \"Distributed ledger technologies\",\n          \"Immutable logging systems\",\n        ];\n      default:\n        return [\"Data integrity fundamentals\"];\n    }\n  }\n\n  // Default to availability expertise\n  switch (level) {\n    case \"None\":\n      return [\"No specific expertise required\"];\n    case \"Low\":\n      return [\"Basic system monitoring\", \"Manual recovery procedures\"];\n    case \"Moderate\":\n      return [\"System redundancy\", \"Backup management\", \"Basic load balancing\"];\n    case \"High\":\n      return [\n        \"High availability architecture\",\n        \"Disaster recovery\",\n        \"Advanced monitoring\",\n        \"Automated failover\",\n      ];\n    case \"Very High\":\n      return [\n        \"Distributed systems\",\n        \"Site reliability engineering\",\n        \"Global load balancing\",\n        \"Chaos engineering\",\n        \"Real-time recovery systems\",\n      ];\n    default:\n      return [\"System reliability fundamentals\"];\n  }\n}\n\nexport default CostEstimationWidget;\n","import React, { useMemo } from \"react\";\nimport { WIDGET_ICONS, WIDGET_TITLES } from \"../../../constants/appConstants\";\nimport { VALUE_CREATION_WIDGET_IDS } from \"../../../constants/testIds\";\nimport { useCIAContentService } from \"../../../hooks/useCIAContentService\";\nimport { SecurityLevel } from \"../../../types/cia\";\nimport { calculateROIEstimate } from \"../../../utils/businessValueUtils\";\nimport { calculateBusinessImpactLevel } from \"../../../utils/riskUtils\";\nimport { hasMethod, isNullish } from \"../../../utils/typeGuards\";\nimport { getWidgetAriaDescription } from \"../../../utils/accessibility\";\nimport SecurityLevelIndicator from \"../../common/SecurityLevelIndicator\";\nimport WidgetContainer from \"../../common/WidgetContainer\";\nimport WidgetErrorBoundary from \"../../common/WidgetErrorBoundary\";\n\n/**\n * Props for ValueCreationWidget component\n */\nexport interface ValueCreationWidgetProps {\n  /**\n   * Selected availability level\n   */\n  availabilityLevel: SecurityLevel;\n\n  /**\n   * Selected integrity level\n   */\n  integrityLevel: SecurityLevel;\n\n  /**\n   * Selected confidentiality level\n   */\n  confidentialityLevel: SecurityLevel;\n\n  /**\n   * Optional CSS class name\n   */\n  className?: string;\n\n  /**\n   * Optional test ID for testing\n   */\n  testId?: string;\n}\n\n/**\n * Interface for business value metric\n */\ninterface BusinessValueMetric {\n  category: string;\n  value: string;\n  description: string;\n  icon?: string;\n}\n\n/**\n * Display value creation information for chosen security levels\n *\n * ## Business Perspective\n *\n * This widget helps stakeholders understand the business value created\n * by security investments, articulating benefits beyond just risk reduction.\n * It provides clear value statements that can be used in business cases and\n * executive communications. üí∞\n */\nconst ValueCreationWidget: React.FC<ValueCreationWidgetProps> = ({\n  availabilityLevel,\n  integrityLevel,\n  confidentialityLevel,\n  className = \"\",\n  testId = \"value-creation-widget\",\n}) => {\n  // Get CIA content service for value creation data\n  const { ciaContentService, error, isLoading } = useCIAContentService();\n\n  // Calculate overall security level\n  const securityScore = useMemo(() => {\n    // Use riskUtils instead of local calculation\n    return calculateBusinessImpactLevel(\n      availabilityLevel,\n      integrityLevel,\n      confidentialityLevel\n    );\n  }, [availabilityLevel, integrityLevel, confidentialityLevel]);\n\n  // Convert security score to SecurityLevel for component compatibility\n  const securityScoreAsLevel = useMemo((): SecurityLevel => {\n    // Convert the string returned by calculateBusinessImpactLevel to SecurityLevel type\n    switch (securityScore) {\n      case \"Minimal\":\n        return \"None\";\n      case \"Low\":\n        return \"Low\";\n      case \"Moderate\":\n        return \"Moderate\";\n      case \"High\":\n        return \"High\";\n      case \"Very High\":\n        return \"Very High\";\n      default:\n        return \"Moderate\"; // Default fallback\n    }\n  }, [securityScore]);\n\n  // Create a numeric impact level for percentage calculations\n  const impactLevelNumeric = useMemo((): number => {\n    switch (securityScore) {\n      case \"Minimal\":\n        return 1;\n      case \"Low\":\n        return 2;\n      case \"Moderate\":\n        return 3;\n      case \"High\":\n        return 4;\n      case \"Very High\":\n        return 5;\n      default:\n        return 3; // Default fallback\n    }\n  }, [securityScore]);\n\n  // Get business value metrics with fallback implementation\n  const valueMetrics = useMemo((): BusinessValueMetric[] => {\n    try {\n      if (!isNullish(ciaContentService)) {\n        // Check if the service has getBusinessValueMetrics method\n        if (hasMethod(ciaContentService, \"getBusinessValueMetrics\")) {\n          const metrics = ciaContentService.getBusinessValueMetrics(\n            availabilityLevel,\n            integrityLevel,\n            confidentialityLevel\n          );\n\n          if (Array.isArray(metrics) && metrics.length > 0) {\n            return metrics;\n          }\n        }\n      }\n\n      // Fallback metrics if service doesn't provide them\n      return generateFallbackValueMetrics(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel,\n        impactLevelNumeric\n      );\n    } catch (err) {\n      console.error(\"Error retrieving business value metrics:\", err);\n      return generateFallbackValueMetrics(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel,\n        impactLevelNumeric\n      );\n    }\n  }, [\n    ciaContentService,\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel,\n    impactLevelNumeric,\n  ]);\n\n  // Get component-specific value statements\n  const getComponentValueStatements = (\n    component: \"availability\" | \"integrity\" | \"confidentiality\",\n    level: SecurityLevel\n  ): string[] => {\n    try {\n      if (!isNullish(ciaContentService)) {\n        // Check if the service has getComponentValueStatements method\n        if (hasMethod(ciaContentService, \"getComponentValueStatements\")) {\n          const statements =\n            ciaContentService.getComponentValueStatements(component, level);\n\n          if (Array.isArray(statements) && statements.length > 0) {\n            return statements;\n          }\n        }\n      }\n\n      // Fallback value statements\n      switch (component) {\n        case \"availability\":\n          if (level === \"None\" || level === \"Low\") {\n            return [\n              \"Basic operational continuity\",\n              \"Minimal protection against service disruptions\",\n            ];\n          } else if (level === \"Moderate\") {\n            return [\n              \"Predictable system access and reliable operations\",\n              \"Improved user satisfaction through consistent service delivery\",\n              \"Enhanced operational efficiency with reduced downtime\",\n            ];\n          } else {\n            return [\n              \"Near-continuous operations even during adverse events\",\n              \"Competitive advantage through superior service reliability\",\n              \"Protected revenue streams with minimal service interruptions\",\n              \"Maintained customer trust through consistent service delivery\",\n            ];\n          }\n\n        case \"integrity\":\n          if (level === \"None\" || level === \"Low\") {\n            return [\n              \"Basic data consistency\",\n              \"Minimal protection against data errors\",\n            ];\n          } else if (level === \"Moderate\") {\n            return [\n              \"Trustworthy data for operational and strategic decisions\",\n              \"Reduced costs from data errors and reconciliation efforts\",\n              \"Improved compliance posture with accurate record-keeping\",\n            ];\n          } else {\n            return [\n              \"Data you can stake your business reputation on\",\n              \"Enhanced business intelligence through high-quality data\",\n              \"Reduced fraud risk with validated transactions\",\n              \"Defensible audit trail for regulatory scrutiny\",\n            ];\n          }\n\n        case \"confidentiality\":\n          if (level === \"None\" || level === \"Low\") {\n            return [\n              \"Basic information protection\",\n              \"Minimal safeguards for sensitive data\",\n            ];\n          } else if (level === \"Moderate\") {\n            return [\n              \"Protected intellectual property and business secrets\",\n              \"Reduced risk of data breaches and associated costs\",\n              \"Enhanced customer and partner trust in data handling\",\n            ];\n          } else {\n            return [\n              \"Secured competitive advantage through protected innovations\",\n              \"Strengthened customer trust with demonstrable privacy controls\",\n              \"Reputation as a secure business partner\",\n              \"Reduced breach-related costs and regulatory penalties\",\n            ];\n          }\n\n        default:\n          return [\"No value statements available\"];\n      }\n    } catch (err) {\n      console.error(`Error retrieving ${component} value statements:`, err);\n      return [`Unable to retrieve ${component} value statements`];\n    }\n  };\n\n  // Get ROI estimates based on security levels\n  const getROIEstimate = (): { value: string; description: string } => {\n    try {\n      // Use the centralized utility function for consistent ROI calculation\n      const roiEstimate = calculateROIEstimate(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel\n      );\n\n      return {\n        value: roiEstimate.value ?? \"Unable to calculate\", // Ensure value is a string\n        description: roiEstimate.description,\n      };\n    } catch (err) {\n      console.error(\"Error calculating ROI estimate:\", err);\n      return {\n        value: \"Unable to calculate\",\n        description: \"ROI estimation error\",\n      };\n    }\n  };\n\n  // Get the business value summary text\n  const getBusinessValueSummary = (): string => {\n    try {\n      if (!isNullish(ciaContentService)) {\n        // Check if the service has getBusinessValueSummary method\n        if (hasMethod(ciaContentService, \"getBusinessValueSummary\")) {\n          const summary = ciaContentService.getBusinessValueSummary(\n            availabilityLevel,\n            integrityLevel,\n            confidentialityLevel\n          );\n\n          if (typeof summary === \"string\" && summary) {\n            return summary;\n          }\n        }\n      }\n\n      // Fallback summary based on security score\n      switch (securityScore) {\n        case \"None\":\n          return \"Minimal security investments provide basic operational capabilities but limited business value.\";\n        case \"Low\":\n          return \"Basic security controls enable fundamental business operations with modest protection against common threats.\";\n        case \"Moderate\":\n          return \"Balanced security investments deliver operational stability, data reliability, and reasonable protection that enable business growth.\";\n        case \"High\":\n          return \"Strategic security investments create significant business value through enhanced reliability, data integrity, and protected information assets.\";\n        case \"Very High\":\n          return \"Premium security investments establish market-leading capabilities and competitive advantages through exceptional reliability, data quality, and information protection.\";\n        default:\n          return \"Security investments can deliver business value through improved operations, enhanced decision-making, and protected information assets.\";\n      }\n    } catch (err) {\n      console.error(\"Error generating business value summary:\", err);\n      return \"Security investments can deliver business value beyond just risk reduction.\";\n    }\n  };\n\n  // Get the ROI estimate\n  const roiEstimate = useMemo(\n    () => getROIEstimate(),\n    [\n      ciaContentService,\n      availabilityLevel,\n      integrityLevel,\n      confidentialityLevel,\n      securityScore,\n    ]\n  );\n\n  return (\n    <WidgetErrorBoundary widgetName=\"Value Creation\">\n      <WidgetContainer\n        title={WIDGET_TITLES.VALUE_CREATION || \"Business Value Creation\"}\n        icon={WIDGET_ICONS.VALUE_CREATION || \"üí∞\"}\n        className={className}\n        testId={testId}\n        isLoading={isLoading}\n        error={error}\n      >\n      <div \n        className=\"p-md sm:p-lg\"\n        role=\"region\"\n        aria-label={getWidgetAriaDescription(\n          \"Business Value Creation\",\n          \"Business value and return on investment created by security investments\"\n        )}\n      >\n        {/* Overview section */}\n        <section \n          className=\"mb-lg\"\n          aria-labelledby=\"value-profile-heading\"\n        >\n          <div className=\"p-md bg-info-light/10 dark:bg-info-dark/20 rounded-md mb-md\">\n            <p className=\"text-body\" data-testid={VALUE_CREATION_WIDGET_IDS.label('summary')}>\n              {getBusinessValueSummary()}\n            </p>\n          </div>\n\n          <div className=\"flex justify-between items-center mb-md\">\n            <h3 id=\"value-profile-heading\" className=\"text-heading font-medium\">\n              Overall Value Profile\n            </h3>\n            <div className=\"flex items-center\">\n              <span className=\"mr-sm text-body text-neutral dark:text-neutral-light\">\n                Security Level:\n              </span>\n              <SecurityLevelIndicator level={securityScoreAsLevel} size=\"md\" />\n            </div>\n          </div>\n\n          {/* ROI estimate */}\n          <div \n            className=\"p-md bg-success-light/10 dark:bg-success-dark/20 rounded-md mb-md\"\n            role=\"region\"\n            aria-labelledby=\"roi-heading\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 id=\"roi-heading\" className=\"font-medium text-success-dark dark:text-success-light\">\n                  Estimated Return on Investment\n                </h4>\n                <p className=\"text-body text-success dark:text-success-light mt-1\">\n                  {roiEstimate.description}\n                </p>\n              </div>\n              <div\n                className=\"text-title font-bold text-success dark:text-success-light\"\n                data-testid={VALUE_CREATION_WIDGET_IDS.value('roi')}\n                aria-label={`Return on investment: ${roiEstimate.value}`}\n              >\n                {roiEstimate.value}\n              </div>\n            </div>\n          </div>\n\n          {/* Business value metrics grid */}\n          <div\n            className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-md\"\n            data-testid={VALUE_CREATION_WIDGET_IDS.section('metrics-grid')}\n          >\n            {valueMetrics.map((metric, index) => (\n              <div\n                key={index}\n                className=\"p-md bg-neutral-light/10 dark:bg-neutral-dark/20 rounded-md border border-neutral-light dark:border-neutral-dark\"\n                data-testid={`value-metric-${index}`}\n              >\n                <div className=\"flex items-center mb-sm\">\n                  <span className=\"text-title mr-sm text-info\">\n                    {metric.icon || \"üìà\"}\n                  </span>\n                  <h4 className=\"font-medium\">{metric.category}</h4>\n                </div>\n                <div className=\"text-heading font-bold text-info dark:text-info-light mb-1\">\n                  {metric.value}\n                </div>\n                <p className=\"text-body text-neutral dark:text-neutral-light\">\n                  {metric.description}\n                </p>\n              </div>\n            ))}\n          </div>\n        </section>\n\n        {/* Component-specific value sections */}\n        <div className=\"mb-lg\">\n          <h3 className=\"text-heading font-medium mb-md\">Component Business Value</h3>\n\n          {/* Confidentiality value */}\n          <div\n            className=\"p-md bg-primary-light/10 dark:bg-primary-dark/20 rounded-md\"\n            data-testid={VALUE_CREATION_WIDGET_IDS.section('confidentiality-value')}\n          >\n            <div className=\"flex items-center mb-sm\">\n              <span className=\"text-title mr-sm\">üîí</span>\n              <h4 className=\"font-medium\">\n                Confidentiality Value ({confidentialityLevel})\n              </h4>\n            </div>\n            <ul className=\"list-disc list-inside pl-2 text-body text-neutral dark:text-neutral-light\">\n              {getComponentValueStatements(\n                \"confidentiality\",\n                confidentialityLevel\n              ).map((statement, index) => (\n                <li\n                  key={index}\n                  className=\"mb-1\"\n                  data-testid={`confidentiality-value-item-${index}`}\n                >\n                  {statement}\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Integrity value */}\n          <div\n            className=\"mb-4 p-3 bg-green-50 dark:bg-green-900 dark:bg-opacity-20 rounded-lg\"\n            data-testid={VALUE_CREATION_WIDGET_IDS.section('integrity-value')}\n          >\n            <div className=\"flex items-center mb-2\">\n              <span className=\"text-xl mr-2\">‚úì</span>\n              <h4 className=\"font-medium\">\n                Integrity Value ({integrityLevel})\n              </h4>\n            </div>\n            <ul className=\"list-disc list-inside pl-2 text-sm text-gray-600 dark:text-gray-400\">\n              {getComponentValueStatements(\"integrity\", integrityLevel).map(\n                (statement, index) => (\n                  <li\n                    key={index}\n                    className=\"mb-1\"\n                    data-testid={`integrity-value-item-${index}`}\n                  >\n                    {statement}\n                  </li>\n                )\n              )}\n            </ul>\n          </div>\n\n          {/* Availability value */}\n          <div\n            className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded-lg\"\n            data-testid={VALUE_CREATION_WIDGET_IDS.section('availability-value')}\n          >\n            <div className=\"flex items-center mb-2\">\n              <span className=\"text-xl mr-2\">‚è±Ô∏è</span>\n              <h4 className=\"font-medium\">\n                Availability Value ({availabilityLevel})\n              </h4>\n            </div>\n            <ul className=\"list-disc list-inside pl-2 text-sm text-gray-600 dark:text-gray-400\">\n              {getComponentValueStatements(\n                \"availability\",\n                availabilityLevel\n              ).map((statement, index) => (\n                <li\n                  key={index}\n                  className=\"mb-1\"\n                  data-testid={`availability-value-item-${index}`}\n                >\n                  {statement}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n\n        {/* Business case section */}\n        <div>\n          <h3 className=\"text-lg font-medium mb-3\">\n            Security Investment Business Case\n          </h3>\n          <div className=\"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3\">\n              Use these value statements to build your business case for\n              security investments:\n            </p>\n            <div className=\"space-y-3\">\n              <div className=\"p-2 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded\">\n                <h5 className=\"text-sm font-medium mb-1\">Executive Summary</h5>\n                <p className=\"text-sm\">\n                  Our {securityScore.toLowerCase()} security investment strategy\n                  delivers business value through improved operational\n                  reliability, data integrity, and information protection.\n                </p>\n              </div>\n              <div className=\"p-2 bg-green-50 dark:bg-green-900 dark:bg-opacity-20 rounded\">\n                <h5 className=\"text-sm font-medium mb-1\">Financial Value</h5>\n                <p className=\"text-sm\">\n                  With an estimated ROI of {roiEstimate.value}, our security\n                  investments provide strong financial returns through risk\n                  reduction, operational improvements, and business enablement.\n                </p>\n              </div>\n              <div className=\"p-2 bg-purple-50 dark:bg-purple-900 dark:bg-opacity-20 rounded\">\n                <h5 className=\"text-sm font-medium mb-1\">Strategic Value</h5>\n                <p className=\"text-sm\">\n                  Beyond direct financial returns, our security program creates\n                  strategic value by enabling digital initiatives, protecting\n                  our brand, and building customer trust.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </WidgetContainer>\n    </WidgetErrorBoundary>\n  );\n};\n\n// Helper function to generate fallback value metrics - refactored to use riskUtils\nfunction generateFallbackValueMetrics(\n  availabilityLevel: SecurityLevel,\n  integrityLevel: SecurityLevel,\n  confidentialityLevel: SecurityLevel,\n  overallLevel: number\n): BusinessValueMetric[] {\n  // Import calculateBusinessImpactLevel from riskUtils instead of recalculating here\n  const impactLevel = calculateBusinessImpactLevel(\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel\n  );\n\n  // Use the impact level to generate appropriate metrics\n  return [\n    {\n      category: \"Trust Enhancement\",\n      value: getPercentageValue(overallLevel, 95),\n      description: \"Increased customer and partner trust in your business\",\n      icon: \"ü§ù\",\n    },\n    {\n      category: \"Operational Efficiency\",\n      value: getPercentageValue(overallLevel, 40),\n      description: \"Improved operational efficiency through reliable systems\",\n      icon: \"‚öôÔ∏è\",\n    },\n    {\n      category: \"Innovation Enablement\",\n      value: getPercentageValue(overallLevel, 70),\n      description: \"Enhanced ability to launch new digital initiatives\",\n      icon: \"üí°\",\n    },\n    {\n      category: \"Decision Quality\",\n      value: getPercentageValue(overallLevel, 60),\n      description: \"Better business decisions through reliable data\",\n      icon: \"üìä\",\n    },\n    {\n      category: \"Competitive Advantage\",\n      value: getPercentageValue(overallLevel, 50),\n      description: \"Market differentiation through security capabilities\",\n      icon: \"üèÜ\",\n    },\n    {\n      category: \"Risk Reduction\",\n      value: getPercentageValue(overallLevel, 80),\n      description: \"Reduced likelihood of business disruptions\",\n      icon: \"üõ°Ô∏è\",\n    },\n  ];\n}\n\n// Helper to generate a reasonable percentage based on security score\nfunction getPercentageValue(score: number, baseValue: number): string {\n  const percentage = Math.min(\n    95,\n    Math.max(5, Math.round(baseValue * (0.3 + score * 0.2)))\n  );\n  return `${percentage}%`;\n}\n\nexport default ValueCreationWidget;\n"],"names":["getBadgeStatus","complianceScore","ComplianceStatusWidget","availabilityLevel","integrityLevel","confidentialityLevel","industry","region","className","testId","COMPLIANCE_TEST_IDS","complianceService","serviceError","isLoading","useComplianceService","activeFramework","setActiveFramework","useState","overallSecurityLevel","useMemo","levelValues","minValue","_","index","complianceStatus","err","getComplianceStatusText","useCallback","statusText","isNullish","getFrameworkStatusBadge","framework","gapAnalysis","getFrameworkRequiredLevel","component","getFrameworkDescription","jsx","WidgetErrorBoundary","WidgetContainer","WIDGET_TITLES","WIDGET_ICONS","jsxs","getWidgetAriaDescription","SECURITY_ICONS","StatusBadge","comp","componentType","currentLevel","requiredLevel","isMeeting","getSecurityLevelValue","gap","rec","Fragment","level","CostEstimationWidget","ciaContentService","useCIAContentService","totalCapex","totalOpex","totalCost","availabilityCost","integrityCost","confidentialityCost","calculateTotalSecurityCost","implementationComplexity","getImplementationComplexity","fteRequirements","levelFteMap","availFte","integFte","confFte","implementationFte","maintenanceFte","getExpertiseForComponent","getDefaultExpertise","details","expertise","isArray","item","isString","expertiseRequired","highestComponent","a","complexityPercentage","costBreakdown","totalComponentCost","costRatio","total","formatCurrency","SecurityLevelBadge","COST_ESTIMATION_WIDGET_IDS","ValueCreationWidget","error","securityScore","calculateBusinessImpactLevel","securityScoreAsLevel","impactLevelNumeric","valueMetrics","hasMethod","metrics","generateFallbackValueMetrics","getComponentValueStatements","statements","getROIEstimate","roiEstimate","calculateROIEstimate","getBusinessValueSummary","summary","VALUE_CREATION_WIDGET_IDS","SecurityLevelIndicator","metric","statement","overallLevel","getPercentageValue","score","baseValue"],"mappings":"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"}