{"version":3,"file":"widgets-business-DZ3Fh81r.js","sources":["../../src/components/widgets/businessvalue/ComplianceStatusWidget.tsx","../../src/components/widgets/businessvalue/CostEstimationWidget.tsx","../../src/components/widgets/businessvalue/ValueCreationWidget.tsx"],"sourcesContent":["import React, { useCallback, useMemo, useState } from \"react\";\nimport { WIDGET_ICONS, WIDGET_TITLES, UI_DISPLAY_LIMITS } from \"../../../constants/appConstants\";\nimport { COMPLIANCE_TEST_IDS } from \"../../../constants/testIds\";\nimport { SECURITY_ICONS } from \"../../../constants/uiConstants\";\nimport { useComplianceService } from \"../../../hooks/useComplianceService\";\nimport { CIAComponent, SecurityLevel } from \"../../../types/cia\";\nimport { StatusType } from \"../../../types/common/StatusTypes\";\nimport { ComplianceStatusDetails } from \"../../../types/compliance\";\nimport { ComplianceStatusWidgetProps } from \"../../../types/widget-props\";\nimport { isNullish } from \"../../../utils/typeGuards\";\nimport { getWidgetAriaDescription } from \"../../../utils/accessibility\";\nimport { WidgetClasses, cn } from \"../../../utils/tailwindClassHelpers\";\nimport StatusBadge from \"../../common/StatusBadge\";\nimport WidgetContainer from \"../../common/WidgetContainer\";\nimport WidgetErrorBoundary from \"../../common/WidgetErrorBoundary\";\n\n// Add function to determine badge status with proper typing\nconst getBadgeStatus = (complianceScore: number): StatusType => {\n  if (complianceScore >= 80) return \"success\";\n  if (complianceScore >= 50) return \"warning\";\n  return \"error\";\n};\n\n/**\n * ComplianceStatusWidget displays status of compliance with various frameworks\n *\n * ## Business Perspective\n *\n * This widget helps executives and compliance officers understand how their\n * security controls align with regulatory requirements and industry standards.\n * It helps organizations identify compliance gaps and prioritize security\n * investments to meet their regulatory obligations. üìã\n */\nconst ComplianceStatusWidget: React.FC<ComplianceStatusWidgetProps> = ({\n  availabilityLevel,\n  integrityLevel,\n  confidentialityLevel,\n  industry,\n  region,\n  className = \"\",\n  testId = COMPLIANCE_TEST_IDS.WIDGET,\n}) => {\n  // Use the compliance service\n  const {\n    complianceService,\n    error: serviceError,\n    isLoading,\n  } = useComplianceService();\n\n  // Active framework for detailed view\n  const [activeFramework, setActiveFramework] = useState<string | null>(null);\n\n  // Calculate overall security level with proper type safety\n  const overallSecurityLevel = useMemo(() => {\n    // Convert security levels to numeric values\n    const levelValues: Record<SecurityLevel, number> = {\n      None: 0,\n      Low: 1,\n      Moderate: 2,\n      High: 3,\n      \"Very High\": 4,\n    };\n\n    // Calculate the minimum security level as the overall level\n    const minValue = Math.min(\n      levelValues[availabilityLevel],\n      levelValues[integrityLevel],\n      levelValues[confidentialityLevel]\n    );\n\n    // Map numeric value back to SecurityLevel using a type-safe approach\n    const levels: SecurityLevel[] = [\n      \"None\",\n      \"Low\",\n      \"Moderate\",\n      \"High\",\n      \"Very High\",\n    ];\n    return levels.find((_, index) => index === minValue) || \"Moderate\";\n  }, [availabilityLevel, integrityLevel, confidentialityLevel]);\n\n  // Get compliance status with proper error handling\n  const complianceStatus = useMemo((): ComplianceStatusDetails | null => {\n    if (isLoading || serviceError || !complianceService) return null;\n\n    try {\n      // Use industry and region context when appropriate\n      return complianceService.getComplianceStatus(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel\n      );\n    } catch (err) {\n      console.error(\"Error getting compliance status:\", err);\n      return null;\n    }\n  }, [\n    complianceService,\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel,\n    industry, // Keep this dependency for potential future implementation\n    region, // Keep this dependency for potential future implementation\n    isLoading,\n    serviceError,\n  ]);\n\n  // Get status text for display with proper error handling\n  const getComplianceStatusText = useCallback((): string => {\n    if (isLoading) return \"Loading compliance status...\";\n    if (serviceError) return \"Error loading compliance status\";\n    if (!complianceStatus) return \"Unable to determine compliance status\";\n\n    try {\n      if (complianceService?.getComplianceStatusText) {\n        const statusText = complianceService.getComplianceStatusText(\n          availabilityLevel,\n          integrityLevel,\n          confidentialityLevel\n        );\n\n        if (!isNullish(statusText)) {\n          return statusText;\n        }\n      }\n\n      // Fallback if service doesn't provide status text\n      if (complianceStatus.status) {\n        return complianceStatus.status;\n      }\n\n      // Final fallback\n      return `Based on ${overallSecurityLevel} security level`;\n    } catch (err) {\n      console.error(\"Error getting compliance status text:\", err);\n      return \"Unable to determine compliance status\";\n    }\n  }, [\n    complianceService,\n    complianceStatus,\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel,\n    overallSecurityLevel,\n    isLoading,\n    serviceError,\n  ]);\n\n  // Define a single helper function for framework status badges\n  const getFrameworkStatusBadge = useCallback(\n    (framework: string): StatusType => {\n      if (!complianceStatus) return \"neutral\";\n\n      if (complianceStatus.compliantFrameworks.includes(framework)) {\n        return \"success\";\n      } else if (\n        complianceStatus.partiallyCompliantFrameworks.includes(framework)\n      ) {\n        return \"warning\";\n      } else {\n        return \"error\";\n      }\n    },\n    [complianceStatus]\n  );\n\n  // Get status text\n  const statusText = useMemo(\n    () => getComplianceStatusText(),\n    [getComplianceStatusText]\n  );\n\n  // Define gapAnalysis variable\n  const gapAnalysis = useMemo(() => {\n    if (isLoading || serviceError || !complianceService || !activeFramework)\n      return null;\n\n    try {\n      return complianceService.getComplianceGapAnalysis(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel,\n        activeFramework\n      );\n    } catch (err) {\n      console.error(\"Error getting gap analysis:\", err);\n      return null;\n    }\n  }, [\n    complianceService,\n    activeFramework,\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel,\n    isLoading,\n    serviceError,\n  ]);\n\n  // Create a type-safe implementation of getFrameworkRequiredLevel\n  const getFrameworkRequiredLevel = useCallback(\n    (framework: string, component: CIAComponent): SecurityLevel => {\n      // If the service is available, use it\n      if (complianceService?.getFrameworkRequiredLevel) {\n        try {\n          return complianceService.getFrameworkRequiredLevel(\n            framework,\n            component\n          );\n        } catch (err) {\n          console.error(`Error getting required level for ${framework}:`, err);\n        }\n      }\n\n      // Default fallback levels based on typical requirements\n      const defaultLevels: Record<\n        string,\n        Record<CIAComponent, SecurityLevel>\n      > = {\n        \"PCI DSS\": {\n          availability: \"High\",\n          integrity: \"High\",\n          confidentiality: \"High\",\n        },\n        HIPAA: {\n          availability: \"High\",\n          integrity: \"High\",\n          confidentiality: \"High\",\n        },\n        GDPR: {\n          availability: \"Moderate\",\n          integrity: \"High\",\n          confidentiality: \"High\",\n        },\n        \"ISO 27001\": {\n          availability: \"Moderate\",\n          integrity: \"Moderate\",\n          confidentiality: \"Moderate\",\n        },\n        \"SOC 2\": {\n          availability: \"Moderate\",\n          integrity: \"Moderate\",\n          confidentiality: \"Moderate\",\n        },\n      };\n\n      // Return the default if available, otherwise return Moderate as a safe fallback\n      return defaultLevels[framework]?.[component] || \"Moderate\";\n    },\n    [complianceService]\n  );\n\n  // Get framework description with error handling\n  const getFrameworkDescription = useCallback(\n    (framework: string): string => {\n      if (!complianceService) return `${framework} requirements`;\n\n      try {\n        if (typeof complianceService.getFrameworkDescription === \"function\") {\n          const description =\n            complianceService.getFrameworkDescription(framework);\n          return description || `${framework} requirements`;\n        }\n        return `${framework} requirements`;\n      } catch (err) {\n        console.error(`Error getting description for ${framework}:`, err);\n        return `${framework} requirements`;\n      }\n    },\n    [complianceService]\n  );\n\n  return (\n    <WidgetErrorBoundary widgetName=\"Compliance Status\">\n      <WidgetContainer\n        title={WIDGET_TITLES.COMPLIANCE_STATUS || \"Compliance Status\"}\n        icon={WIDGET_ICONS.COMPLIANCE_STATUS || \"üìã\"}\n        className={className}\n        testId={testId}\n        isLoading={isLoading}\n        error={serviceError}\n      >\n      <div \n        className=\"p-xs space-y-xs\"\n        role=\"region\"\n        aria-label={getWidgetAriaDescription(\n          \"Compliance Status\",\n          \"Status of compliance with regulatory frameworks and industry standards\"\n        )}\n      >\n        {/* Overall Compliance Status - Compact */}\n        <section \n          className=\"mb-xs\"\n          aria-label=\"Overall Compliance Status\"\n        >\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-xs mb-xs\">\n            <div className=\"p-xs bg-info-light/10 dark:bg-info-dark/20 rounded border border-info-light/30 dark:border-info-dark/30\">\n              <div className=\"text-caption text-info-dark dark:text-info-light font-medium mb-xs\">Status</div>\n              <div className=\"text-body-lg font-bold text-info-dark dark:text-info-light\">\n                {statusText}\n              </div>\n            </div>\n            <div className=\"p-xs bg-success-light/10 dark:bg-success-dark/20 rounded border border-success-light/30 dark:border-success-dark/30\">\n              <div className=\"text-caption text-success-dark dark:text-success-light font-medium mb-xs\">Score</div>\n              <div className=\"flex items-center\">\n                <div className=\"text-body-lg font-bold text-success-dark dark:text-success-light mr-xs\" data-testid={COMPLIANCE_TEST_IDS.COMPLIANCE_SCORE}>\n                  {complianceStatus?.complianceScore ?? 0}%\n                </div>\n                <StatusBadge\n                  status={getBadgeStatus(complianceStatus?.complianceScore ?? 0)}\n                  testId={COMPLIANCE_TEST_IDS.COMPLIANCE_STATUS_BADGE}\n                >\n                  {getBadgeStatus(complianceStatus?.complianceScore ?? 0)}\n                </StatusBadge>\n              </div>\n            </div>\n          </div>\n          \n          {/* Progress bar */}\n          {complianceStatus && (\n            <div \n              className=\"relative h-1 rounded-full bg-info-light/20 dark:bg-info-dark overflow-hidden\"\n              role=\"progressbar\"\n              aria-valuenow={complianceStatus.complianceScore ?? 0}\n              aria-valuemin={0}\n              aria-valuemax={100}\n              aria-label={`Compliance score: ${complianceStatus.complianceScore ?? 0} percent`}\n            >\n              <div\n                style={{ width: `${complianceStatus.complianceScore ?? 0}%` }}\n                className=\"h-full bg-info dark:bg-info-light\"\n                data-testid={COMPLIANCE_TEST_IDS.COMPLIANCE_SCORE_BAR}\n              ></div>\n            </div>\n          )}\n        </section>\n\n        {/* Framework Status - Horizontal Badge Layout */}\n        {complianceStatus && (\n          <div className=\"mb-xs\">\n            <h3 className=\"text-body-lg font-medium mb-xs\">Frameworks</h3>\n            \n            {/* Compliant Frameworks - Horizontal badges */}\n            {complianceStatus.compliantFrameworks.length > 0 && (\n              <div className=\"mb-xs\">\n                <div className=\"text-caption text-success-dark dark:text-success-light font-medium mb-xs\"><span aria-hidden=\"true\">‚úì</span> Compliant</div>\n                <div className=\"flex flex-wrap gap-xs\" data-testid={COMPLIANCE_TEST_IDS.COMPLIANT_FRAMEWORKS_LIST}>\n                  {complianceStatus.compliantFrameworks.map((framework, index) => (\n                    <button\n                      type=\"button\"\n                      key={framework}\n                      onClick={() => setActiveFramework(framework)}\n                      className={cn(\n                        \"px-xs py-xs rounded text-caption font-medium transition-all\",\n                        \"bg-success-light/20 dark:bg-success-dark/30 text-success-dark dark:text-success-light\",\n                        \"border border-success-light/50 dark:border-success-dark/50\",\n                        \"hover:bg-success-light/30 dark:hover:bg-success-dark/40\",\n                        activeFramework === framework && \"ring-1 ring-success dark:ring-success-light\"\n                      )}\n                      data-testid={`${COMPLIANCE_TEST_IDS.FRAMEWORK_ITEM_PREFIX}-${index}`}\n                      aria-label={`View ${framework} compliance details`}\n                    >\n                      {framework}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Partially Compliant - Horizontal badges */}\n            {complianceStatus.partiallyCompliantFrameworks.length > 0 && (\n              <div className=\"mb-xs\">\n                <div className=\"text-caption text-warning-dark dark:text-warning-light font-medium mb-xs\"><span aria-hidden=\"true\">‚ö†</span> Partial</div>\n                <div className=\"flex flex-wrap gap-xs\" data-testid={COMPLIANCE_TEST_IDS.PARTIALLY_COMPLIANT_FRAMEWORKS_LIST}>\n                  {complianceStatus.partiallyCompliantFrameworks.map((framework, index) => (\n                    <button\n                      type=\"button\"\n                      key={framework}\n                      onClick={() => setActiveFramework(framework)}\n                      className={cn(\n                        \"px-xs py-xs rounded text-caption font-medium transition-all\",\n                        \"bg-warning-light/20 dark:bg-warning-dark/30 text-warning-dark dark:text-warning-light\",\n                        \"border border-warning-light/50 dark:border-warning-dark/50\",\n                        \"hover:bg-warning-light/30 dark:hover:bg-warning-dark/40\",\n                        activeFramework === framework && \"ring-1 ring-warning dark:ring-warning-light\"\n                      )}\n                      data-testid={`${COMPLIANCE_TEST_IDS.FRAMEWORK_ITEM_PREFIX}-partial-${index}`}\n                      aria-label={`View ${framework} compliance details`}\n                    >\n                      {framework}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Non-Compliant - Horizontal badges */}\n            {complianceStatus.nonCompliantFrameworks.length > 0 && (\n              <div className=\"mb-xs\">\n                <div className=\"text-caption text-error-dark dark:text-error-light font-medium mb-xs\"><span aria-hidden=\"true\">‚úó</span> Non-Compliant</div>\n                <div className=\"flex flex-wrap gap-xs\" data-testid={COMPLIANCE_TEST_IDS.NON_COMPLIANT_FRAMEWORKS_LIST}>\n                  {complianceStatus.nonCompliantFrameworks.map((framework, index) => (\n                    <button\n                      type=\"button\"\n                      key={framework}\n                      onClick={() => setActiveFramework(framework)}\n                      className={cn(\n                        \"px-xs py-xs rounded text-caption font-medium transition-all\",\n                        \"bg-error-light/20 dark:bg-error-dark/30 text-error-dark dark:text-error-light\",\n                        \"border border-error-light/50 dark:border-error-dark/50\",\n                        \"hover:bg-error-light/30 dark:hover:bg-error-dark/40\",\n                        activeFramework === framework && \"ring-1 ring-error dark:ring-error-light\"\n                      )}\n                      data-testid={`${COMPLIANCE_TEST_IDS.FRAMEWORK_ITEM_PREFIX}-non-${index}`}\n                      aria-label={`View ${framework} compliance details`}\n                    >\n                      {framework}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Framework Gap Analysis - Compact */}\n        {activeFramework && (\n          <div className=\"mb-xs\">\n            <div className=\"p-xs bg-neutral-light/5 dark:bg-neutral-dark/10 rounded border border-neutral-light/20 dark:border-neutral-dark/20\">\n              <h3 className=\"text-body-lg font-medium mb-xs\">{activeFramework} Analysis</h3>\n              \n              {gapAnalysis ? (\n                <div className=\"space-y-xs\">\n                  {/* Status */}\n                  <div className=\"text-caption text-neutral-dark dark:text-neutral-light\">\n                    {gapAnalysis.isCompliant\n                      ? `‚úì Meeting ${activeFramework} requirements`\n                      : `‚úó Not fully meeting ${activeFramework} requirements`}\n                  </div>\n\n                  {/* Component Requirements - Compact Grid */}\n                  <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-xs\">\n                    {[\"availability\", \"integrity\", \"confidentiality\"].map((comp) => {\n                      const componentType = comp as CIAComponent;\n                      const currentLevel =\n                        componentType === \"availability\"\n                          ? availabilityLevel\n                          : componentType === \"integrity\"\n                          ? integrityLevel\n                          : confidentialityLevel;\n                      const requiredLevel = getFrameworkRequiredLevel(activeFramework, componentType);\n                      const isMeeting = getSecurityLevelValue(currentLevel) >= getSecurityLevelValue(requiredLevel);\n\n                      return (\n                        <div\n                          key={comp}\n                          className={cn(\n                            \"p-xs rounded text-caption\",\n                            isMeeting\n                              ? \"bg-success-light/10 dark:bg-success-dark/20 text-success-dark dark:text-success-light\"\n                              : \"bg-error-light/10 dark:bg-error-dark/20 text-error-dark dark:text-error-light\"\n                          )}\n                        >\n                          <div className=\"font-medium mb-xs\">\n                            {componentType.charAt(0).toUpperCase() + componentType.slice(1)}\n                          </div>\n                          <div className=\"flex flex-col\">\n                            <span>{currentLevel}</span>\n                            <span className=\"opacity-70\">‚Üí {requiredLevel}</span>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n\n                  {/* Gaps - Compact */}\n                  {gapAnalysis.gaps && gapAnalysis.gaps.length > 0 && (\n                    <div className=\"text-caption text-error-dark dark:text-error-light\">\n                      <div className=\"font-medium mb-xs\">Gaps:</div>\n                      <ul className=\"space-y-xs pl-xs\">\n                        {gapAnalysis.gaps.slice(0, UI_DISPLAY_LIMITS.MAX_DISPLAYED_GAPS).map((gap, index) => (\n                          <li key={index}>\n                            ‚Ä¢ {typeof gap === \"string\" ? gap : gap.framework || gap.frameworkDescription || \"Undefined gap\"}\n                          </li>\n                        ))}\n                        {gapAnalysis.gaps.length > UI_DISPLAY_LIMITS.MAX_DISPLAYED_GAPS && (\n                          <li className=\"opacity-70\">\n                            + {gapAnalysis.gaps.length - UI_DISPLAY_LIMITS.MAX_DISPLAYED_GAPS} more gap\n                            {gapAnalysis.gaps.length - UI_DISPLAY_LIMITS.MAX_DISPLAYED_GAPS !== 1 ? \"s\" : \"\"}\n                          </li>\n                        )}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"text-center text-caption text-neutral-dark/70 dark:text-neutral-light/70 py-xs\">\n                  No gap analysis available\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Compliance Tips - Compact */}\n        <div className=\"p-xs bg-info-light/5 dark:bg-info-dark/10 rounded border border-info-light/20 dark:border-info-dark/20\">\n          <div className=\"flex items-center mb-xs\">\n            <span className=\"text-info-dark dark:text-info-light mr-xs\" aria-hidden=\"true\">üí°</span>\n            <h3 className=\"text-body font-medium\">Tips</h3>\n          </div>\n          <ul className=\"text-caption text-neutral-dark dark:text-neutral-light space-y-xs pl-xs\">\n            {complianceStatus && complianceStatus.complianceScore ? (\n              complianceStatus.complianceScore < 50 ? (\n                <>\n                  <li>‚Ä¢ Focus on foundational security controls</li>\n                  <li>‚Ä¢ Prioritize multi-framework controls</li>\n                </>\n              ) : complianceStatus.complianceScore < 80 ? (\n                <>\n                  <li>‚Ä¢ Address specific gaps in partial frameworks</li>\n                  <li>‚Ä¢ Implement regular compliance monitoring</li>\n                </>\n              ) : (\n                <>\n                  <li>‚Ä¢ Maintain strong posture with regular reviews</li>\n                  <li>‚Ä¢ Prepare for upcoming regulatory changes</li>\n                </>\n              )\n            ) : (\n              <>\n                <li>‚Ä¢ Implement controls across all CIA components</li>\n                <li>‚Ä¢ Start with industry-relevant frameworks</li>\n              </>\n            )}\n          </ul>\n        </div>\n      </div>\n    </WidgetContainer>\n    </WidgetErrorBoundary>\n  );\n};\n\n// Helper function to convert security level to numeric value\nfunction getSecurityLevelValue(level: SecurityLevel): number {\n  const levelValues: Record<SecurityLevel, number> = {\n    None: 0,\n    Low: 1,\n    Moderate: 2,\n    High: 3,\n    \"Very High\": 4,\n  };\n  return levelValues[level] || 0;\n}\n\nexport default ComplianceStatusWidget;\n","import React, { useMemo } from \"react\";\nimport { WIDGET_ICONS, WIDGET_TITLES } from \"../../../constants/appConstants\";\nimport { COST_ESTIMATION_WIDGET_IDS } from \"../../../constants/testIds\";\nimport { useCIAContentService } from \"../../../hooks/useCIAContentService\";\nimport { CIAComponent, SecurityLevel } from \"../../../types/cia\";\nimport { CostEstimationWidgetProps } from \"../../../types/widget-props\";\nimport { calculateTotalSecurityCost } from \"../../../utils/costCalculationUtils\";\nimport { formatCurrency } from \"../../../utils/formatUtils\";\nimport { getImplementationComplexity } from \"../../../utils/riskUtils\";\nimport { getSecurityLevelValue } from \"../../../utils/securityLevelUtils\";\nimport { isArray, isNullish, isString } from \"../../../utils/typeGuards\";\nimport { getWidgetAriaDescription } from \"../../../utils/accessibility\";\nimport { WidgetClasses, cn } from \"../../../utils/tailwindClassHelpers\";\nimport MetricCard from \"../../common/MetricCard\";\nimport SecurityLevelBadge from \"../../common/SecurityLevelBadge\";\nimport WidgetContainer from \"../../common/WidgetContainer\";\nimport WidgetErrorBoundary from \"../../common/WidgetErrorBoundary\";\n\n/**\n * Widget for estimating implementation and operational costs\n *\n * ## Business Perspective\n *\n * This widget provides financial stakeholders with cost estimates\n * for implementing and maintaining the selected security levels,\n * helping with budget planning and investment decisions related\n * to security initiatives. üí≤\n */\nconst CostEstimationWidget: React.FC<CostEstimationWidgetProps> = ({\n  availabilityLevel,\n  integrityLevel,\n  confidentialityLevel,\n  className = \"\",\n  testId = COST_ESTIMATION_WIDGET_IDS.root,\n}) => {\n  // Use the content service\n  const {\n    ciaContentService,\n    error: serviceError,\n    isLoading,\n  } = useCIAContentService();\n\n  // Calculate costs using consistent utility function\n  const {\n    totalCapex,\n    totalOpex,\n    totalCost,\n    availabilityCost,\n    integrityCost,\n    confidentialityCost,\n  } = useMemo(\n    () =>\n      calculateTotalSecurityCost(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel\n      ),\n    [availabilityLevel, integrityLevel, confidentialityLevel]\n  );\n\n  // Calculate implementation complexity using existing utility\n  const implementationComplexity = useMemo(\n    () =>\n      getImplementationComplexity(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel\n      ),\n    [availabilityLevel, integrityLevel, confidentialityLevel]\n  );\n\n  // Calculate FTE requirements using same approach as TechnicalDetailsWidget\n  const fteRequirements = useMemo(() => {\n    // FTE mapping from security level - same as in TechnicalDetailsWidget\n    const levelFteMap: Record<SecurityLevel, number> = {\n      None: 0.1,\n      Low: 0.25,\n      Moderate: 0.5,\n      High: 1,\n      \"Very High\": 2,\n    };\n\n    // Calculate FTEs for each component based on their respective security levels\n    const availFte = levelFteMap[availabilityLevel] || 0.5;\n    const integFte = levelFteMap[integrityLevel] || 0.5;\n    const confFte = levelFteMap[confidentialityLevel] || 0.5;\n\n    // Find the max FTE across all components to match TechnicalDetailsWidget exactly\n    const maxFte = Math.max(availFte, integFte, confFte);\n\n    // Implementation is the primary FTE\n    const implementationFte = maxFte;\n\n    // Maintenance FTE is typically 60% of implementation\n    const maintenanceFte = Number((implementationFte * 0.6).toFixed(1));\n\n    return {\n      implementation: implementationFte,\n      maintenance: maintenanceFte,\n      total: Number((implementationFte + maintenanceFte).toFixed(1)),\n    };\n  }, [availabilityLevel, integrityLevel, confidentialityLevel]);\n\n  // Get expertise required - using defined type and handling missing property\n  const getExpertiseForComponent = (\n    component: CIAComponent,\n    level: SecurityLevel\n  ): string[] => {\n    try {\n      if (isNullish(ciaContentService)) {\n        return getDefaultExpertise(component, level);\n      }\n\n      const details = ciaContentService.getComponentDetails(component, level);\n\n      // Since expertiseRequired is not in CIADetails type, we need to handle it differently\n      // Use runtime checks for safety without type assertions\n      if (!isNullish(details) && typeof details === \"object\" && \"expertiseRequired\" in details) {\n        const expertise = (details as { expertiseRequired?: unknown }).expertiseRequired;\n        if (isArray(expertise) && expertise.every(item => isString(item))) {\n          return expertise as string[];\n        }\n        if (isString(expertise)) {\n          return [expertise];\n        }\n      }\n\n      return getDefaultExpertise(component, level);\n    } catch (err) {\n      console.error(`Error getting expertise for ${component}:`, err);\n      return getDefaultExpertise(component, level);\n    }\n  };\n\n  // Get highest component expertise\n  const expertiseRequired = useMemo(() => {\n    // Get the component with the highest security level for expertise determination\n    const highestComponent = [\n      { type: \"availability\" as CIAComponent, level: availabilityLevel },\n      { type: \"integrity\" as CIAComponent, level: integrityLevel },\n      {\n        type: \"confidentiality\" as CIAComponent,\n        level: confidentialityLevel,\n      },\n    ].sort(\n      (a, b) => getSecurityLevelValue(b.level) - getSecurityLevelValue(a.level)\n    )[0];\n\n    return getExpertiseForComponent(\n      highestComponent.type,\n      highestComponent.level\n    );\n  }, [availabilityLevel, integrityLevel, confidentialityLevel]);\n\n  // Calculate the complexity percentage for visualization\n  const complexityPercentage = useMemo(() => {\n    const complexityMap: Record<string, number> = {\n      Low: 25,\n      Moderate: 50,\n      High: 75,\n      \"Very High\": 100,\n    };\n    return complexityMap[implementationComplexity] || 0;\n  }, [implementationComplexity]);\n\n  // Calculate cost breakdown percentages for visualization\n  const costBreakdown = useMemo(() => {\n    const totalComponentCost =\n      availabilityCost.capex +\n      availabilityCost.opex +\n      integrityCost.capex +\n      integrityCost.opex +\n      confidentialityCost.capex +\n      confidentialityCost.opex;\n\n    return {\n      availability:\n        totalComponentCost > 0\n          ? (\n              ((availabilityCost.capex + availabilityCost.opex) /\n                totalComponentCost) *\n              100\n            ).toFixed(0)\n          : \"0\",\n      integrity:\n        totalComponentCost > 0\n          ? (\n              ((integrityCost.capex + integrityCost.opex) /\n                totalComponentCost) *\n              100\n            ).toFixed(0)\n          : \"0\",\n      confidentiality:\n        totalComponentCost > 0\n          ? (\n              ((confidentialityCost.capex + confidentialityCost.opex) /\n                totalComponentCost) *\n              100\n            ).toFixed(0)\n          : \"0\",\n    };\n  }, [availabilityCost, integrityCost, confidentialityCost]);\n\n  // Calculate capex vs opex ratio\n  const costRatio = useMemo(() => {\n    const total = totalCapex + totalOpex;\n    return {\n      capex: total > 0 ? ((totalCapex / total) * 100).toFixed(0) : \"0\",\n      opex: total > 0 ? ((totalOpex / total) * 100).toFixed(0) : \"0\",\n    };\n  }, [totalCapex, totalOpex]);\n\n  return (\n    <WidgetErrorBoundary widgetName=\"Cost Estimation\">\n      <WidgetContainer\n        title={WIDGET_TITLES.COST_ESTIMATION || \"Cost Estimation\"}\n        icon={WIDGET_ICONS.COST_ESTIMATION || \"üí∞\"}\n        className={className}\n        testId={testId}\n        isLoading={isLoading}\n        error={serviceError}\n      >\n      <div \n        className=\"p-xs space-y-xs\"\n        role=\"region\"\n        aria-label={getWidgetAriaDescription(\n          \"Cost Estimation\",\n          \"Cost estimates for implementing and maintaining security controls\"\n        )}\n      >\n        {/* Summary cost section - Compact 3-column grid */}\n        <section \n          className=\"grid grid-cols-1 sm:grid-cols-3 gap-xs mb-xs\"\n          aria-labelledby=\"cost-summary-heading\"\n        >\n          <h3 id=\"cost-summary-heading\" className=\"sr-only\">Cost Summary</h3>\n          <div className=\"p-xs bg-info-light/10 dark:bg-info-dark/20 rounded border border-info-light/30 dark:border-info-dark/30\">\n            <div className=\"text-caption text-info-dark dark:text-info-light font-medium mb-xs\">CAPEX</div>\n            <div className=\"text-heading font-bold text-info-dark dark:text-info-light leading-none\" data-testid={COST_ESTIMATION_WIDGET_IDS.label('capex')}>\n              {formatCurrency(totalCapex)}\n            </div>\n          </div>\n          <div className=\"p-xs bg-success-light/10 dark:bg-success-dark/20 rounded border border-success-light/30 dark:border-success-dark/30\">\n            <div className=\"text-caption text-success-dark dark:text-success-light font-medium mb-xs\">OPEX</div>\n            <div className=\"text-heading font-bold text-success-dark dark:text-success-light leading-none\" data-testid={COST_ESTIMATION_WIDGET_IDS.label('opex')}>\n              {formatCurrency(totalOpex)}\n            </div>\n          </div>\n          <div className=\"p-xs bg-primary-light/10 dark:bg-primary-dark/20 rounded border border-primary-light/30 dark:border-primary-dark/30\">\n            <div className=\"text-caption text-primary-dark dark:text-primary-light font-medium mb-xs\">TOTAL</div>\n            <div className=\"text-heading font-bold text-primary-dark dark:text-primary-light leading-none\" data-testid={COST_ESTIMATION_WIDGET_IDS.label('total')}>\n              {formatCurrency(totalCost)}\n            </div>\n          </div>\n        </section>\n\n        {/* Implementation details - Compact inline layout */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-xs mb-xs\">\n          {/* Implementation complexity */}\n          <div className=\"p-xs bg-neutral-light/5 dark:bg-neutral-dark/10 rounded border border-neutral-light/20 dark:border-neutral-dark/20\">\n            <div className=\"flex justify-between items-center mb-xs\">\n              <span className=\"text-caption font-medium\">Complexity</span>\n              <span className=\"text-body-lg font-bold text-primary-dark dark:text-primary-light\">\n                {implementationComplexity}\n              </span>\n            </div>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1\">\n              <div\n                className=\"h-1 bg-primary dark:bg-primary-light rounded-full\"\n                style={{ width: `${complexityPercentage}%` }}\n                role=\"progressbar\"\n                aria-valuenow={complexityPercentage}\n                aria-valuemin={0}\n                aria-valuemax={100}\n                aria-label={`Implementation complexity: ${implementationComplexity}`}\n              ></div>\n            </div>\n          </div>\n\n          {/* Personnel requirements - Compact */}\n          <div className=\"p-xs bg-neutral-light/5 dark:bg-neutral-dark/10 rounded border border-neutral-light/20 dark:border-neutral-dark/20\">\n            <div className=\"flex justify-between items-center mb-xs\">\n              <span className=\"text-caption font-medium\">Personnel</span>\n              <span className=\"text-body-lg font-bold text-info-dark dark:text-info-light\">\n                {fteRequirements.total} FTE\n              </span>\n            </div>\n            <div className=\"text-caption text-neutral-dark/70 dark:text-neutral-light/70\">\n              Impl: {fteRequirements.implementation} | Maint: {fteRequirements.maintenance}\n            </div>\n          </div>\n        </div>\n\n        {/* Component breakdown - Horizontal cards */}\n        <div className=\"mb-xs\">\n          <h3 className=\"text-body-lg font-medium mb-xs\">By Component</h3>\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-xs\">\n            {/* Confidentiality */}\n            <div className=\"p-xs bg-primary-light/10 dark:bg-primary-dark/20 rounded border border-primary-light/30 dark:border-primary-dark/30\">\n              <div className=\"flex items-center justify-between mb-xs\">\n                <span className=\"text-caption font-medium text-primary-dark dark:text-primary-light\"><span aria-hidden=\"true\">üîí</span> Conf</span>\n                <SecurityLevelBadge\n                  category=\"\"\n                  level={confidentialityLevel}\n                  textClass=\"text-primary-dark dark:text-primary-light\"\n                  testId={COST_ESTIMATION_WIDGET_IDS.label('conf-level')}\n                />\n              </div>\n              <div className=\"text-body-lg font-bold text-primary-dark dark:text-primary-light leading-none\">\n                {formatCurrency(confidentialityCost.capex + confidentialityCost.opex)}\n              </div>\n            </div>\n\n            {/* Integrity */}\n            <div className=\"p-xs bg-success-light/10 dark:bg-success-dark/20 rounded border border-success-light/30 dark:border-success-dark/30\">\n              <div className=\"flex items-center justify-between mb-xs\">\n                <span className=\"text-caption font-medium text-success-dark dark:text-success-light\"><span aria-hidden=\"true\">‚úì</span> Integ</span>\n                <SecurityLevelBadge\n                  category=\"\"\n                  level={integrityLevel}\n                  textClass=\"text-success-dark dark:text-success-light\"\n                  testId={COST_ESTIMATION_WIDGET_IDS.label('int-level')}\n                />\n              </div>\n              <div className=\"text-body-lg font-bold text-success-dark dark:text-success-light leading-none\">\n                {formatCurrency(integrityCost.capex + integrityCost.opex)}\n              </div>\n            </div>\n\n            {/* Availability */}\n            <div className=\"p-xs bg-info-light/10 dark:bg-info-dark/20 rounded border border-info-light/30 dark:border-info-dark/30\">\n              <div className=\"flex items-center justify-between mb-xs\">\n                <span className=\"text-caption font-medium text-info-dark dark:text-info-light\"><span aria-hidden=\"true\">‚è±Ô∏è</span> Avail</span>\n                <SecurityLevelBadge\n                  category=\"\"\n                  level={availabilityLevel}\n                  textClass=\"text-info-dark dark:text-info-light\"\n                  testId={COST_ESTIMATION_WIDGET_IDS.label('avail-level')}\n                />\n              </div>\n              <div className=\"text-body-lg font-bold text-info-dark dark:text-info-light leading-none\">\n                {formatCurrency(availabilityCost.capex + availabilityCost.opex)}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Expertise required - Compact grid */}\n        <div className=\"p-xs bg-info-light/5 dark:bg-info-dark/10 rounded border border-info-light/20 dark:border-info-dark/20\">\n          <h3 className=\"text-body-lg font-medium mb-xs flex items-center\">\n            <span className=\"mr-xs\" aria-hidden=\"true\">üí°</span>Expertise\n          </h3>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-x-xs gap-y-xs text-caption text-neutral-dark dark:text-neutral-light\">\n            {expertiseRequired.map((expertise: string, index: number) => (\n              <div key={`expertise-${index}`} className=\"flex items-start\">\n                <span className=\"text-info-dark dark:text-info-light mr-xs\">‚Ä¢</span>\n                <span>{expertise}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </WidgetContainer>\n    </WidgetErrorBoundary>\n  );\n};\n\n// Helper function to provide default expertise requirements\nfunction getDefaultExpertise(\n  component: CIAComponent,\n  level: SecurityLevel\n): string[] {\n  if (component === \"confidentiality\") {\n    switch (level) {\n      case \"None\":\n        return [\"No specific expertise required\"];\n      case \"Low\":\n        return [\"Basic security knowledge\", \"Access control fundamentals\"];\n      case \"Moderate\":\n        return [\n          \"Identity management\",\n          \"Encryption technologies\",\n          \"Authentication systems\",\n        ];\n      case \"High\":\n        return [\n          \"Advanced cryptography\",\n          \"Identity and access management\",\n          \"Security architecture\",\n          \"Data protection\",\n        ];\n      case \"Very High\":\n        return [\n          \"Security architecture\",\n          \"Advanced cryptography\",\n          \"Zero-trust implementation\",\n          \"Data protection specialization\",\n          \"Hardware security\",\n        ];\n      default:\n        return [\"General security knowledge\"];\n    }\n  }\n\n  if (component === \"integrity\") {\n    switch (level) {\n      case \"None\":\n        return [\"No specific expertise required\"];\n      case \"Low\":\n        return [\"Basic data validation\", \"Error handling\"];\n      case \"Moderate\":\n        return [\n          \"Data validation techniques\",\n          \"Database integrity\",\n          \"Error handling\",\n        ];\n      case \"High\":\n        return [\n          \"Cryptographic verification\",\n          \"Digital signatures\",\n          \"Secure logging\",\n          \"Change management\",\n        ];\n      case \"Very High\":\n        return [\n          \"Advanced cryptography\",\n          \"Formal verification\",\n          \"Distributed ledger technologies\",\n          \"Immutable logging systems\",\n        ];\n      default:\n        return [\"Data integrity fundamentals\"];\n    }\n  }\n\n  // Default to availability expertise\n  switch (level) {\n    case \"None\":\n      return [\"No specific expertise required\"];\n    case \"Low\":\n      return [\"Basic system monitoring\", \"Manual recovery procedures\"];\n    case \"Moderate\":\n      return [\"System redundancy\", \"Backup management\", \"Basic load balancing\"];\n    case \"High\":\n      return [\n        \"High availability architecture\",\n        \"Disaster recovery\",\n        \"Advanced monitoring\",\n        \"Automated failover\",\n      ];\n    case \"Very High\":\n      return [\n        \"Distributed systems\",\n        \"Site reliability engineering\",\n        \"Global load balancing\",\n        \"Chaos engineering\",\n        \"Real-time recovery systems\",\n      ];\n    default:\n      return [\"System reliability fundamentals\"];\n  }\n}\n\nexport default CostEstimationWidget;\n","import React, { useMemo } from \"react\";\nimport { WIDGET_ICONS, WIDGET_TITLES, UI_DISPLAY_LIMITS } from \"../../../constants/appConstants\";\nimport { VALUE_CREATION_WIDGET_IDS } from \"../../../constants/testIds\";\nimport { useCIAContentService } from \"../../../hooks/useCIAContentService\";\nimport { SecurityLevel } from \"../../../types/cia\";\nimport { ValueCreationWidgetProps } from \"../../../types/widget-props\";\nimport { calculateROIEstimate } from \"../../../utils/businessValueUtils\";\nimport { calculateBusinessImpactLevel } from \"../../../utils/riskUtils\";\nimport { hasMethod, isNullish } from \"../../../utils/typeGuards\";\nimport { getWidgetAriaDescription } from \"../../../utils/accessibility\";\nimport { WidgetClasses, cn } from \"../../../utils/tailwindClassHelpers\";\nimport SecurityLevelIndicator from \"../../common/SecurityLevelIndicator\";\nimport WidgetContainer from \"../../common/WidgetContainer\";\nimport WidgetErrorBoundary from \"../../common/WidgetErrorBoundary\";\n\n/**\n * Interface for business value metric\n */\ninterface BusinessValueMetric {\n  category: string;\n  value: string;\n  description: string;\n  icon?: string;\n}\n\n/**\n * Display value creation information for chosen security levels\n *\n * ## Business Perspective\n *\n * This widget helps stakeholders understand the business value created\n * by security investments, articulating benefits beyond just risk reduction.\n * It provides clear value statements that can be used in business cases and\n * executive communications. üí∞\n */\nconst ValueCreationWidget: React.FC<ValueCreationWidgetProps> = ({\n  availabilityLevel,\n  integrityLevel,\n  confidentialityLevel,\n  className = \"\",\n  testId = VALUE_CREATION_WIDGET_IDS.root,\n}) => {\n  // Get CIA content service for value creation data\n  const { ciaContentService, error, isLoading } = useCIAContentService();\n\n  // State for collapsible sections - start with \"summary\" expanded to show metrics immediately\n  const [expandedSection, setExpandedSection] = React.useState<string | null>(\"summary\");\n\n  // Calculate overall security level\n  const securityScore = useMemo(() => {\n    // Use riskUtils instead of local calculation\n    return calculateBusinessImpactLevel(\n      availabilityLevel,\n      integrityLevel,\n      confidentialityLevel\n    );\n  }, [availabilityLevel, integrityLevel, confidentialityLevel]);\n\n  // Convert security score to SecurityLevel for component compatibility\n  const securityScoreAsLevel = useMemo((): SecurityLevel => {\n    // Convert the string returned by calculateBusinessImpactLevel to SecurityLevel type\n    switch (securityScore) {\n      case \"Minimal\":\n        return \"None\";\n      case \"Low\":\n        return \"Low\";\n      case \"Moderate\":\n        return \"Moderate\";\n      case \"High\":\n        return \"High\";\n      case \"Very High\":\n        return \"Very High\";\n      default:\n        return \"Moderate\"; // Default fallback\n    }\n  }, [securityScore]);\n\n  // Create a numeric impact level for percentage calculations\n  const impactLevelNumeric = useMemo((): number => {\n    switch (securityScore) {\n      case \"Minimal\":\n        return 1;\n      case \"Low\":\n        return 2;\n      case \"Moderate\":\n        return 3;\n      case \"High\":\n        return 4;\n      case \"Very High\":\n        return 5;\n      default:\n        return 3; // Default fallback\n    }\n  }, [securityScore]);\n\n  // Get business value metrics with fallback implementation\n  const valueMetrics = useMemo((): BusinessValueMetric[] => {\n    try {\n      if (!isNullish(ciaContentService)) {\n        // Check if the service has getBusinessValueMetrics method\n        if (hasMethod(ciaContentService, \"getBusinessValueMetrics\")) {\n          const metrics = ciaContentService.getBusinessValueMetrics(\n            availabilityLevel,\n            integrityLevel,\n            confidentialityLevel\n          );\n\n          if (Array.isArray(metrics) && metrics.length > 0) {\n            return metrics;\n          }\n        }\n      }\n\n      // Fallback metrics if service doesn't provide them\n      return generateFallbackValueMetrics(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel,\n        impactLevelNumeric\n      );\n    } catch (err) {\n      console.error(\"Error retrieving business value metrics:\", err);\n      return generateFallbackValueMetrics(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel,\n        impactLevelNumeric\n      );\n    }\n  }, [\n    ciaContentService,\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel,\n    impactLevelNumeric,\n  ]);\n\n  // Get component-specific value statements\n  const getComponentValueStatements = (\n    component: \"availability\" | \"integrity\" | \"confidentiality\",\n    level: SecurityLevel\n  ): string[] => {\n    try {\n      if (!isNullish(ciaContentService)) {\n        // Check if the service has getComponentValueStatements method\n        if (hasMethod(ciaContentService, \"getComponentValueStatements\")) {\n          const statements =\n            ciaContentService.getComponentValueStatements(component, level);\n\n          if (Array.isArray(statements) && statements.length > 0) {\n            return statements;\n          }\n        }\n      }\n\n      // Fallback value statements\n      switch (component) {\n        case \"availability\":\n          if (level === \"None\" || level === \"Low\") {\n            return [\n              \"Basic operational continuity\",\n              \"Minimal protection against service disruptions\",\n            ];\n          } else if (level === \"Moderate\") {\n            return [\n              \"Predictable system access and reliable operations\",\n              \"Improved user satisfaction through consistent service delivery\",\n              \"Enhanced operational efficiency with reduced downtime\",\n            ];\n          } else {\n            return [\n              \"Near-continuous operations even during adverse events\",\n              \"Competitive advantage through superior service reliability\",\n              \"Protected revenue streams with minimal service interruptions\",\n              \"Maintained customer trust through consistent service delivery\",\n            ];\n          }\n\n        case \"integrity\":\n          if (level === \"None\" || level === \"Low\") {\n            return [\n              \"Basic data consistency\",\n              \"Minimal protection against data errors\",\n            ];\n          } else if (level === \"Moderate\") {\n            return [\n              \"Trustworthy data for operational and strategic decisions\",\n              \"Reduced costs from data errors and reconciliation efforts\",\n              \"Improved compliance posture with accurate record-keeping\",\n            ];\n          } else {\n            return [\n              \"Data you can stake your business reputation on\",\n              \"Enhanced business intelligence through high-quality data\",\n              \"Reduced fraud risk with validated transactions\",\n              \"Defensible audit trail for regulatory scrutiny\",\n            ];\n          }\n\n        case \"confidentiality\":\n          if (level === \"None\" || level === \"Low\") {\n            return [\n              \"Basic information protection\",\n              \"Minimal safeguards for sensitive data\",\n            ];\n          } else if (level === \"Moderate\") {\n            return [\n              \"Protected intellectual property and business secrets\",\n              \"Reduced risk of data breaches and associated costs\",\n              \"Enhanced customer and partner trust in data handling\",\n            ];\n          } else {\n            return [\n              \"Secured competitive advantage through protected innovations\",\n              \"Strengthened customer trust with demonstrable privacy controls\",\n              \"Reputation as a secure business partner\",\n              \"Reduced breach-related costs and regulatory penalties\",\n            ];\n          }\n\n        default:\n          return [\"No value statements available\"];\n      }\n    } catch (err) {\n      console.error(`Error retrieving ${component} value statements:`, err);\n      return [`Unable to retrieve ${component} value statements`];\n    }\n  };\n\n  // Get ROI estimates based on security levels\n  const getROIEstimate = (): { value: string; description: string } => {\n    try {\n      // Use the centralized utility function for consistent ROI calculation\n      const roiEstimate = calculateROIEstimate(\n        availabilityLevel,\n        integrityLevel,\n        confidentialityLevel\n      );\n\n      return {\n        value: roiEstimate.value ?? \"Unable to calculate\", // Ensure value is a string\n        description: roiEstimate.description,\n      };\n    } catch (err) {\n      console.error(\"Error calculating ROI estimate:\", err);\n      return {\n        value: \"Unable to calculate\",\n        description: \"ROI estimation error\",\n      };\n    }\n  };\n\n  // Get the business value summary text\n  const getBusinessValueSummary = (): string => {\n    try {\n      if (!isNullish(ciaContentService)) {\n        // Check if the service has getBusinessValueSummary method\n        if (hasMethod(ciaContentService, \"getBusinessValueSummary\")) {\n          const summary = ciaContentService.getBusinessValueSummary(\n            availabilityLevel,\n            integrityLevel,\n            confidentialityLevel\n          );\n\n          if (typeof summary === \"string\" && summary) {\n            return summary;\n          }\n        }\n      }\n\n      // Fallback summary based on security score\n      switch (securityScore) {\n        case \"None\":\n          return \"Minimal security investments provide basic operational capabilities but limited business value.\";\n        case \"Low\":\n          return \"Basic security controls enable fundamental business operations with modest protection against common threats.\";\n        case \"Moderate\":\n          return \"Balanced security investments deliver operational stability, data reliability, and reasonable protection that enable business growth.\";\n        case \"High\":\n          return \"Strategic security investments create significant business value through enhanced reliability, data integrity, and protected information assets.\";\n        case \"Very High\":\n          return \"Premium security investments establish market-leading capabilities and competitive advantages through exceptional reliability, data quality, and information protection.\";\n        default:\n          return \"Security investments can deliver business value through improved operations, enhanced decision-making, and protected information assets.\";\n      }\n    } catch (err) {\n      console.error(\"Error generating business value summary:\", err);\n      return \"Security investments can deliver business value beyond just risk reduction.\";\n    }\n  };\n\n  // Get the ROI estimate\n  const roiEstimate = useMemo(\n    () => getROIEstimate(),\n    [\n      ciaContentService,\n      availabilityLevel,\n      integrityLevel,\n      confidentialityLevel,\n      securityScore,\n    ]\n  );\n\n  // Toggle section expansion\n  const toggleSection = (section: string): void => {\n    setExpandedSection(expandedSection === section ? null : section);\n  };\n\n  return (\n    <WidgetErrorBoundary widgetName=\"Value Creation\">\n      <WidgetContainer\n        title={WIDGET_TITLES.VALUE_CREATION || \"Business Value Creation\"}\n        icon={WIDGET_ICONS.VALUE_CREATION || \"üí∞\"}\n        className={className}\n        testId={testId}\n        isLoading={isLoading}\n        error={error}\n      >\n      <div \n        className=\"p-md\"\n        role=\"region\"\n        aria-label={getWidgetAriaDescription(\n          \"Business Value Creation\",\n          \"Business value and return on investment created by security investments\"\n        )}\n      >\n        {/* Summary cards at top - Compact 3-column grid (responsive) */}\n        <section className=\"grid grid-cols-1 sm:grid-cols-3 gap-sm mb-md\" aria-label=\"Summary metrics\">\n          <div className=\"p-sm bg-success-light/10 dark:bg-success-dark/20 rounded-md border border-success-light/30 dark:border-success-dark/30\">\n            <div className=\"text-caption text-success-dark dark:text-success-light font-medium mb-xs\">ROI</div>\n            <div className=\"text-heading font-bold text-success-dark dark:text-success-light\" data-testid={VALUE_CREATION_WIDGET_IDS.value('roi')}>\n              {roiEstimate.value}\n            </div>\n            <div className=\"text-caption text-success-dark/70 dark:text-success-light/70\">{roiEstimate.description}</div>\n          </div>\n          <div className=\"p-sm bg-info-light/10 dark:bg-info-dark/20 rounded-md border border-info-light/30 dark:border-info-dark/30\">\n            <div className=\"text-caption text-info-dark dark:text-info-light font-medium mb-xs\">Security Level</div>\n            <div className=\"flex items-center\">\n              <SecurityLevelIndicator level={securityScoreAsLevel} size=\"sm\" />\n              <span className=\"text-body-lg font-bold text-info-dark dark:text-info-light ml-xs\">{securityScore}</span>\n            </div>\n          </div>\n          <div className=\"p-sm bg-primary-light/10 dark:bg-primary-dark/20 rounded-md border border-primary-light/30 dark:border-primary-dark/30\">\n            <div className=\"text-caption text-primary-dark dark:text-primary-light font-medium mb-xs\">Value Metrics</div>\n            <div className=\"text-heading font-bold text-primary-dark dark:text-primary-light\">\n              {valueMetrics.length}\n            </div>\n            <div className=\"text-caption text-primary-dark/70 dark:text-primary-light/70\">Categories</div>\n          </div>\n        </section>\n\n        {/* Collapsible sections */}\n        {/* Value Overview */}\n        <div className=\"mb-sm\">\n          <button\n            type=\"button\"\n            onClick={() => toggleSection(\"summary\")}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                toggleSection(\"summary\");\n              }\n            }}\n            className=\"w-full p-sm bg-neutral-light/5 dark:bg-neutral-dark/10 rounded-md border border-neutral-light/20 dark:border-neutral-dark/20 flex justify-between items-center hover:bg-neutral-light/10 dark:hover:bg-neutral-dark/15 transition-colors\"\n            aria-expanded={expandedSection === \"summary\"}\n            aria-controls=\"value-overview-content\"\n            aria-label=\"Toggle Value Overview section\"\n          >\n            <span className=\"text-body-lg font-medium\"><span aria-hidden=\"true\">üìä</span> Value Overview</span>\n            <span className=\"text-body\" aria-hidden=\"true\">{expandedSection === \"summary\" ? \"‚ñº\" : \"‚ñ∂\"}</span>\n          </button>\n          {expandedSection === \"summary\" && (\n            <div\n              id=\"value-overview-content\"\n              className=\"p-sm mt-xs bg-info-light/5 dark:bg-info-dark/10 rounded-md border border-info-light/20 dark:border-info-dark/20\"\n            >\n              <p className=\"text-body text-neutral-dark dark:text-neutral-light mb-sm\" data-testid={VALUE_CREATION_WIDGET_IDS.label('summary')}>\n                {getBusinessValueSummary()}\n              </p>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-xs\">\n                {valueMetrics.slice(0, UI_DISPLAY_LIMITS.MAX_PREVIEW_METRICS).map((metric, index) => (\n                  <div key={index} className=\"p-xs bg-white/50 dark:bg-gray-800/50 rounded\">\n                    <div className=\"flex items-center mb-xs\">\n                      <span className=\"mr-xs\" aria-hidden=\"true\">{metric.icon || \"üìà\"}</span>\n                      <span className=\"text-caption font-medium\">{metric.category}</span>\n                    </div>\n                    <div className=\"text-body font-bold text-info-dark dark:text-info-light\">{metric.value}</div>\n                  </div>\n                ))}\n              </div>\n              {valueMetrics.length > UI_DISPLAY_LIMITS.MAX_PREVIEW_METRICS && (\n                <div className=\"text-caption text-neutral-dark/70 dark:text-neutral-light/70 mt-xs text-center\">\n                  + {valueMetrics.length - UI_DISPLAY_LIMITS.MAX_PREVIEW_METRICS} more metric\n                  {valueMetrics.length - UI_DISPLAY_LIMITS.MAX_PREVIEW_METRICS !== 1 ? \"s\" : \"\"}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Component Value - Collapsible */}\n        <div className=\"mb-sm\">\n          <button\n            type=\"button\"\n            onClick={() => toggleSection(\"components\")}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                toggleSection(\"components\");\n              }\n            }}\n            className=\"w-full p-sm bg-neutral-light/5 dark:bg-neutral-dark/10 rounded-md border border-neutral-light/20 dark:border-neutral-dark/20 flex justify-between items-center hover:bg-neutral-light/10 dark:hover:bg-neutral-dark/15 transition-colors\"\n            aria-expanded={expandedSection === \"components\"}\n            aria-controls=\"component-value-content\"\n            aria-label=\"Toggle Component Business Value section\"\n          >\n            <span className=\"text-body-lg font-medium\"><span aria-hidden=\"true\">üîí</span> Component Business Value</span>\n            <span className=\"text-body\" aria-hidden=\"true\">{expandedSection === \"components\" ? \"‚ñº\" : \"‚ñ∂\"}</span>\n          </button>\n          {expandedSection === \"components\" && (\n            <div\n              id=\"component-value-content\"\n              className=\"p-sm mt-xs bg-neutral-light/5 dark:bg-neutral-dark/10 rounded-md border border-neutral-light/20 dark:border-neutral-dark/20 space-y-sm\"\n            >\n              {/* Confidentiality */}\n              <div className=\"p-xs bg-primary-light/10 dark:bg-primary-dark/20 rounded\">\n                <div className=\"flex items-center mb-xs\">\n                  <span className=\"mr-xs\" aria-hidden=\"true\">üîí</span>\n                  <span className=\"text-body font-medium text-primary-dark dark:text-primary-light\">\n                    Confidentiality ({confidentialityLevel})\n                  </span>\n                </div>\n                <ul className=\"text-caption text-neutral-dark dark:text-neutral-light space-y-xs pl-sm\">\n                  {getComponentValueStatements(\"confidentiality\", confidentialityLevel).map((statement, index) => (\n                    <li key={index} data-testid={`confidentiality-value-item-${index}`}>‚Ä¢ {statement}</li>\n                  ))}\n                </ul>\n              </div>\n\n              {/* Integrity */}\n              <div className=\"p-xs bg-success-light/10 dark:bg-success-dark/20 rounded\">\n                <div className=\"flex items-center mb-xs\">\n                  <span className=\"mr-xs\" aria-hidden=\"true\">‚úì</span>\n                  <span className=\"text-body font-medium text-success-dark dark:text-success-light\">\n                    Integrity ({integrityLevel})\n                  </span>\n                </div>\n                <ul className=\"text-caption text-neutral-dark dark:text-neutral-light space-y-xs pl-sm\">\n                  {getComponentValueStatements(\"integrity\", integrityLevel).map((statement, index) => (\n                    <li key={index} data-testid={`integrity-value-item-${index}`}>‚Ä¢ {statement}</li>\n                  ))}\n                </ul>\n              </div>\n\n              {/* Availability */}\n              <div className=\"p-xs bg-info-light/10 dark:bg-info-dark/20 rounded\">\n                <div className=\"flex items-center mb-xs\">\n                  <span className=\"mr-xs\" aria-hidden=\"true\">‚è±Ô∏è</span>\n                  <span className=\"text-body font-medium text-info-dark dark:text-info-light\">\n                    Availability ({availabilityLevel})\n                  </span>\n                </div>\n                <ul className=\"text-caption text-neutral-dark dark:text-neutral-light space-y-xs pl-sm\">\n                  {getComponentValueStatements(\"availability\", availabilityLevel).map((statement, index) => (\n                    <li key={index} data-testid={`availability-value-item-${index}`}>‚Ä¢ {statement}</li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Business Case - Collapsible */}\n        <div className=\"mb-sm\">\n          <button\n            type=\"button\"\n            onClick={() => toggleSection(\"business-case\")}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                toggleSection(\"business-case\");\n              }\n            }}\n            className=\"w-full p-sm bg-neutral-light/5 dark:bg-neutral-dark/10 rounded-md border border-neutral-light/20 dark:border-neutral-dark/20 flex justify-between items-center hover:bg-neutral-light/10 dark:hover:bg-neutral-dark/15 transition-colors\"\n            aria-expanded={expandedSection === \"business-case\"}\n            aria-controls=\"business-case-content\"\n            aria-label=\"Toggle Investment Business Case section\"\n          >\n            <span className=\"text-body-lg font-medium\"><span aria-hidden=\"true\">üíº</span> Investment Business Case</span>\n            <span className=\"text-body\" aria-hidden=\"true\">{expandedSection === \"business-case\" ? \"‚ñº\" : \"‚ñ∂\"}</span>\n          </button>\n          {expandedSection === \"business-case\" && (\n            <div\n              id=\"business-case-content\"\n              className=\"p-sm mt-xs bg-neutral-light/5 dark:bg-neutral-dark/10 rounded-md border border-neutral-light/20 dark:border-neutral-dark/20 space-y-xs\"\n            >\n              <div className=\"p-xs bg-info-light/10 dark:bg-info-dark/20 rounded\">\n                <h5 className=\"text-caption font-medium mb-xs\">Executive Summary</h5>\n                <p className=\"text-caption\">\n                  Our {securityScore.toLowerCase()} security investment strategy delivers business value through improved operational reliability, data integrity, and information protection.\n                </p>\n              </div>\n              <div className=\"p-xs bg-success-light/10 dark:bg-success-dark/20 rounded\">\n                <h5 className=\"text-caption font-medium mb-xs\">Financial Value</h5>\n                <p className=\"text-caption\">\n                  With an estimated ROI of {roiEstimate.value}, our security investments provide strong financial returns through risk reduction, operational improvements, and business enablement.\n                </p>\n              </div>\n              <div className=\"p-xs bg-primary-light/10 dark:bg-primary-dark/20 rounded\">\n                <h5 className=\"text-caption font-medium mb-xs\">Strategic Value</h5>\n                <p className=\"text-caption\">\n                  Beyond direct financial returns, our security program creates strategic value by enabling digital initiatives, protecting our brand, and building customer trust.\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </WidgetContainer>\n    </WidgetErrorBoundary>\n  );\n};\n\n// Helper function to generate fallback value metrics - refactored to use riskUtils\nfunction generateFallbackValueMetrics(\n  availabilityLevel: SecurityLevel,\n  integrityLevel: SecurityLevel,\n  confidentialityLevel: SecurityLevel,\n  overallLevel: number\n): BusinessValueMetric[] {\n  // Import calculateBusinessImpactLevel from riskUtils instead of recalculating here\n  const impactLevel = calculateBusinessImpactLevel(\n    availabilityLevel,\n    integrityLevel,\n    confidentialityLevel\n  );\n\n  // Use the impact level to generate appropriate metrics\n  return [\n    {\n      category: \"Trust Enhancement\",\n      value: getPercentageValue(overallLevel, 95),\n      description: \"Increased customer and partner trust in your business\",\n      icon: \"ü§ù\",\n    },\n    {\n      category: \"Operational Efficiency\",\n      value: getPercentageValue(overallLevel, 40),\n      description: \"Improved operational efficiency through reliable systems\",\n      icon: \"‚öôÔ∏è\",\n    },\n    {\n      category: \"Innovation Enablement\",\n      value: getPercentageValue(overallLevel, 70),\n      description: \"Enhanced ability to launch new digital initiatives\",\n      icon: \"üí°\",\n    },\n    {\n      category: \"Decision Quality\",\n      value: getPercentageValue(overallLevel, 60),\n      description: \"Better business decisions through reliable data\",\n      icon: \"üìä\",\n    },\n    {\n      category: \"Competitive Advantage\",\n      value: getPercentageValue(overallLevel, 50),\n      description: \"Market differentiation through security capabilities\",\n      icon: \"üèÜ\",\n    },\n    {\n      category: \"Risk Reduction\",\n      value: getPercentageValue(overallLevel, 80),\n      description: \"Reduced likelihood of business disruptions\",\n      icon: \"üõ°Ô∏è\",\n    },\n  ];\n}\n\n// Helper to generate a reasonable percentage based on security score\nfunction getPercentageValue(score: number, baseValue: number): string {\n  const percentage = Math.min(\n    95,\n    Math.max(5, Math.round(baseValue * (0.3 + score * 0.2)))\n  );\n  return `${percentage}%`;\n}\n\nexport default ValueCreationWidget;\n"],"names":["getBadgeStatus","complianceScore","ComplianceStatusWidget","availabilityLevel","integrityLevel","confidentialityLevel","industry","region","className","testId","COMPLIANCE_TEST_IDS","complianceService","serviceError","isLoading","useComplianceService","activeFramework","setActiveFramework","useState","overallSecurityLevel","useMemo","levelValues","minValue","_","index","complianceStatus","err","getComplianceStatusText","useCallback","statusText","isNullish","framework","gapAnalysis","getFrameworkRequiredLevel","component","jsx","WidgetErrorBoundary","WidgetContainer","WIDGET_TITLES","WIDGET_ICONS","jsxs","getWidgetAriaDescription","StatusBadge","cn","comp","componentType","currentLevel","requiredLevel","isMeeting","getSecurityLevelValue","UI_DISPLAY_LIMITS","gap","Fragment","level","CostEstimationWidget","COST_ESTIMATION_WIDGET_IDS","ciaContentService","useCIAContentService","totalCapex","totalOpex","totalCost","availabilityCost","integrityCost","confidentialityCost","calculateTotalSecurityCost","implementationComplexity","getImplementationComplexity","fteRequirements","levelFteMap","availFte","integFte","confFte","implementationFte","maintenanceFte","getExpertiseForComponent","getDefaultExpertise","details","expertise","isArray","item","isString","expertiseRequired","highestComponent","a","b","complexityPercentage","totalComponentCost","total","formatCurrency","SecurityLevelBadge","ValueCreationWidget","VALUE_CREATION_WIDGET_IDS","error","expandedSection","setExpandedSection","React","securityScore","calculateBusinessImpactLevel","securityScoreAsLevel","impactLevelNumeric","valueMetrics","hasMethod","metrics","generateFallbackValueMetrics","getComponentValueStatements","statements","getROIEstimate","roiEstimate","calculateROIEstimate","getBusinessValueSummary","summary","toggleSection","section","SecurityLevelIndicator","e","metric","statement","overallLevel","getPercentageValue","score","baseValue"],"mappings":"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"}